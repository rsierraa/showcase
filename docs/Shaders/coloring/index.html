<!doctype html><html lang=en-us dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Exercise # Figure it out the js code of the above sketches. Implement other blending modes. Coloring # Color Blender # 1. Introducción # El &ldquo;color blending&rdquo; o &ldquo;mezcla de colores&rdquo; se refiere al proceso de combinar varios colores para crear un efecto de transición suave entre ellos. Es comúnmente utilizado en el campo del diseño gráfico, la pintura, la ilustración y la fotografía digital.
2. Antecedentes y trabajo previo # El uso del color blending tiene antecedentes históricos y técnicos en diversas formas de arte visual."><meta name=theme-color content="#FFFFFF"><meta name=color-scheme content="light dark"><meta property="og:title" content="Coloring"><meta property="og:description" content="Exercise # Figure it out the js code of the above sketches. Implement other blending modes. Coloring # Color Blender # 1. Introducción # El &ldquo;color blending&rdquo; o &ldquo;mezcla de colores&rdquo; se refiere al proceso de combinar varios colores para crear un efecto de transición suave entre ellos. Es comúnmente utilizado en el campo del diseño gráfico, la pintura, la ilustración y la fotografía digital.
2. Antecedentes y trabajo previo # El uso del color blending tiene antecedentes históricos y técnicos en diversas formas de arte visual."><meta property="og:type" content="article"><meta property="og:url" content="https://visualcomputing.github.io/showcase/docs/Shaders/coloring/"><meta property="article:section" content="docs"><meta property="article:modified_time" content="2023-06-27T01:01:32-05:00"><title>Coloring | Visual Computing 2023-1</title><link rel=manifest href=/showcase/manifest.json><link rel=icon href=/showcase/favicon.png type=image/x-icon><link rel=stylesheet href=/showcase/book.min.4b35fed0bea034bbc19c89c71e14b73fb9c68cfcc586b9382adfb9b7b103ba06.css integrity="sha256-SzX+0L6gNLvBnInHHhS3P7nGjPzFhrk4Kt+5t7EDugY=" crossorigin=anonymous><script defer src=/showcase/flexsearch.min.js></script>
<script defer src=/showcase/en.search.min.3a8d658c77eb93c7f12a2b8af49a700131e474f288eefb605d9fa61576dbe5a7.js integrity="sha256-Oo1ljHfrk8fxKiuK9JpwATHkdPKI7vtgXZ+mFXbb5ac=" crossorigin=anonymous></script></head><body dir=ltr><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a class="flex align-center" href=/showcase/><span>Visual Computing 2023-1</span></a></h2><div class=book-search><input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><ul><li><input type=checkbox id=section-7e4921a1bef13fc49e19193dc1bfdc8f class=toggle>
<label for=section-7e4921a1bef13fc49e19193dc1bfdc8f class="flex justify-between"><a href=/showcase/docs/members/>Members</a></label><ul><li><a href=/showcase/docs/members/Adrian/>Adrian</a></li><li><a href=/showcase/docs/members/Jaime/>Jaime</a></li><li><a href=/showcase/docs/members/Rodrigo/>Rodrigo</a></li></ul></li><li class=book-section-flat><a href=/showcase/docs/Shaders/>Shaders</a><ul><li><a href=/showcase/docs/Shaders/coloring/ class=active>Coloring</a></li><li><a href=/showcase/docs/Shaders/posteffects/>Post Effects</a></li><li><a href=/showcase/docs/Shaders/test/>Test</a></li><li><a href=/showcase/docs/Shaders/Texturing/>Texturing</a></li><li><a href=/showcase/docs/Shaders/ImageProcessing/>Image Processing</a></li><li><a href=/showcase/docs/Shaders/ProceduralTexturing/>Procedural Texturing</a></li><li><a href=/showcase/docs/Shaders/SpatialCoherence/>Spatial Coherence</a></li><li><a href=/showcase/docs/Shaders/Photomosaic/>Photomosaic</a></li></ul></li><li class=book-section-flat><a href=/showcase/docs/Transformations/>Transformations</a><ul><li><a href=/showcase/docs/Transformations/hola1/>Hola1</a></li></ul></li><li class=book-section-flat><a href=/showcase/docs/Visual-Illusions/>Visual Illusions</a><ul><li><input type=checkbox id=section-99e4a0d55300f831d740177d881e77f4 class=toggle>
<label for=section-99e4a0d55300f831d740177d881e77f4 class="flex justify-between"><a href=/showcase/docs/Visual-Illusions/Coloring/>Coloring</a></label><ul><li><a href=/showcase/docs/Visual-Illusions/Coloring/Color-blindness/>Color Blindness</a></li></ul></li><li><input type=checkbox id=section-bd03a1ba8998ae8c9df2b933d511e416 class=toggle>
<label for=section-bd03a1ba8998ae8c9df2b933d511e416 class="flex justify-between"><a href=/showcase/docs/Visual-Illusions/Mach-Bands/>Mach Bands</a></label><ul><li><a href=/showcase/docs/Visual-Illusions/Mach-Bands/Terrain-with-Perlin-noise/>Terrain With Perlin Noise</a></li></ul></li><li><input type=checkbox id=section-7a7081fda5df7dbf85b6d879015de52b class=toggle>
<label for=section-7a7081fda5df7dbf85b6d879015de52b class="flex justify-between"><a href=/showcase/docs/Visual-Illusions/Masking/>Masking</a></label><ul><li><a href=/showcase/docs/Visual-Illusions/Masking/Visual-masking/>Visual Masking</a></li><li><a href=/showcase/docs/Visual-Illusions/Masking/Convolution-masks/>Convolution Masks</a></li></ul></li><li><input type=checkbox id=section-8f4e9ca131433d238729d21435de5a65 class=toggle>
<label for=section-8f4e9ca131433d238729d21435de5a65 class="flex justify-between"><a href=/showcase/docs/Visual-Illusions/Spatial-Coherence/>Spatial Coherence</a></label><ul><li><a href=/showcase/docs/Visual-Illusions/Spatial-Coherence/Pixelator-demo/>Pixelator Demo</a></li></ul></li></ul></li></ul></nav><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/showcase/svg/menu.svg class=book-icon alt=Menu></label>
<strong>Coloring</strong>
<label for=toc-control><img src=/showcase/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><ul><li><a href=#exercise>Exercise</a></li><li><a href=#coloring>Coloring</a></li><li><a href=#color-blender>Color Blender</a></li><li><a href=#1-introducción>1. Introducción</a></li><li><a href=#2-antecedentes-y-trabajo-previo>2. Antecedentes y trabajo previo</a></li><li><a href=#3-solución>3. Solución</a><ul><li><a href=#controls>Controls</a></li></ul></li><li><a href=#código>Código</a></li><li><a href=#4-conclusiones>4. Conclusiones</a></li><li><a href=#5-trabajo-a-futuro>5. Trabajo a futuro</a></li></ul></li></ul></nav></aside></header><article class=markdown><h2 id=exercise>Exercise
<a class=anchor href=#exercise>#</a></h2><ol><li>Figure it out the js code of the above sketches.</li><li>Implement other blending modes.</li></ol><h2 id=coloring>Coloring
<a class=anchor href=#coloring>#</a></h2><iframe id=colorBlend style=width:950px;height:900px srcdoc="
        <!DOCTYPE html>
        <html>
          <head>
            <script src=https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.6.0/p5.min.js></script>
            <script src=https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.6.0/addons/p5.sound.min.js></script>
             <script src=https://cdn.jsdelivr.net/gh/VisualComputing/p5.treegl/p5.treegl.js></script> 
            
            
            
            
            <script src=/showcase/sketches/shaders/Blending/colorBlend.js></script>
          </head>
          <body>
          </body>
        </html>
      "></iframe><h2 id=color-blender>Color Blender
<a class=anchor href=#color-blender>#</a></h2><h2 id=1-introducción>1. Introducción
<a class=anchor href=#1-introducci%c3%b3n>#</a></h2><p>El &ldquo;color blending&rdquo; o &ldquo;mezcla de colores&rdquo; se refiere al proceso de combinar varios colores para crear un efecto de transición suave entre ellos. Es comúnmente utilizado en el campo del diseño gráfico, la pintura, la ilustración y la fotografía digital.</p><h2 id=2-antecedentes-y-trabajo-previo>2. Antecedentes y trabajo previo
<a class=anchor href=#2-antecedentes-y-trabajo-previo>#</a></h2><p>El uso del color blending tiene antecedentes históricos y técnicos en diversas formas de arte visual. Algunos ejemplos importantes son los siguientes:</p><p>Arte tradicional: En la historia del arte, el uso de la mezcla de colores ha estado presente durante siglos. Los maestros de la pintura al óleo, como Leonardo da Vinci y Rembrandt, empleaban técnicas de mezcla de colores para lograr transiciones suaves y tonos intermedios en sus obras. Utilizaban capas de pintura superpuestas y diferentes tipos de pinceles para lograr estos efectos.</p><p>Impresión de colores: El desarrollo de la técnica de impresión a color ha contribuido al uso del color blending en la producción de imágenes impresas. Desde las primeras técnicas de impresión en relieve hasta la impresión en offset moderna, se han utilizado diferentes métodos para lograr una mezcla suave de colores. Esto incluye el uso de puntos de colores cercanos entre sí, como en la impresión de semitonos, para crear la ilusión de tonos y mezclas de colores.</p><p>Fotografía e impresión digital: Con el advenimiento de la fotografía digital y la edición de imágenes en computadoras, el color blending se ha vuelto más accesible y versátil. Los programas de edición de imágenes, como Adobe Photoshop, ofrecen una amplia gama de herramientas y técnicas para mezclar colores de manera digital. Esto permite a los artistas y diseñadores crear efectos de color más complejos y realistas en sus trabajos.</p><p>Tecnología de visualización: La tecnología de visualización también ha jugado un papel importante en el desarrollo del color blending. Los avances en pantallas de alta resolución, como las pantallas de píxeles individuales en los monitores modernos, han permitido una representación más precisa y detallada de las mezclas de colores. Esto ha sido especialmente relevante en campos como el diseño gráfico, la animación y los videojuegos.</p><h2 id=3-solución>3. Solución
<a class=anchor href=#3-soluci%c3%b3n>#</a></h2><p>Esta aplicación utiliza diferentes métodos de mezcla en una imagen con un color seleccionado por el usuario.</p><p>En primer lugar, la imagen cargada se representa y se envía como una textura al shader de mezcla. El shader de mezcla recibe el color seleccionado por el usuario como un arreglo de JavaScript de cuatro posiciones, donde cada entrada se divide por 255 para representar un color RGBA normalizado en el rango de 0 a 1.</p><p>El shader de mezcla toma el color de cada texel que recibe en la textura (imagen cargada y recibida) y realiza el cálculo de la mezcla con el color recibido, utilizando la fórmula correspondiente según el modo de mezcla seleccionado.</p><p>El resultado de la operación de mezcla es un color que se aplica al píxel correspondiente en la textura de salida, la cual se representa en el cuadrado de la parte inferior.</p><p>Esta textura renderizada en la parte inferior es la misma imagen cargada inicialmente, pero sus colores son el resultado de la operación de mezcla aplicada texel a texel con el color seleccionado por el usuario.</p><p>Los modos de mezcla implementados incluyen: multiplicación, suma (dodge lineal), pantalla, superposición, más oscuro, más claro, quemado de color, quemado lineal, diferencia, división, exclusión, esquivar color, luz intensa, luz vívida, luz lineal, luz de pin y cuatro versiones de luz suave: photoshop, pegtop, ilussions.hu y w3c.</p><p>Las fórmulas fueron tomadas de <a href=https://en.wikipedia.org/wiki/Blend_modes>Blend Modes (Wikipedia)</a> y <a href=http://www.deepskycolors.com/archivo/2010/04/21/formulas-for-Photoshop-blending-modes.html>Formulas for Photoshop blending modes (RBA&rsquo;s Astrophotography)</a></p><p>Otras referencias utilizadas: <a href=https://stackoverflow.com/questions/67576655/why-my-texture-coordinates-are-inverted-each-time-i-call-my-glsl-shader-in-p5js>Why my texture coordinates are inverted each time I call my GLSL shader in P5.js (Stack Overflow)</a></p><iframe id=colorBlend2 style=width:950px;height:900px srcdoc="
        <!DOCTYPE html>
        <html>
          <head>
            <script src=https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.6.0/p5.min.js></script>
            <script src=https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.6.0/addons/p5.sound.min.js></script>
             <script src=https://cdn.jsdelivr.net/gh/VisualComputing/p5.treegl/p5.treegl.js></script> 
            
            
            
            
            <script src=/showcase/sketches/shaders/Blending/colorBlend2.js></script>
          </head>
          <body>
          </body>
        </html>
      "></iframe><h3 id=controls>Controls
<a class=anchor href=#controls>#</a></h3><ul><li><strong>Botón Subir archivo</strong>: para cargar una imagen o video</li><li><strong>Checkbox Video por defecto</strong>: marcar para usar el video por defecto, desmarcar para usar la imagen por defecto</li><li><strong>Slider</strong>: controla el brillo</li><li><strong>Selector</strong>: selecciona el blending mode que desea utilizar</li><li><strong>Color Picker</strong>: selecciona el color que se usará en la mezcla para cada pixel del archivo cargado</li></ul><iframe id=blend style=width:950px;height:900px srcdoc="
        <!DOCTYPE html>
        <html>
          <head>
            <script src=https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.6.0/p5.min.js></script>
            <script src=https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.6.0/addons/p5.sound.min.js></script>
             <script src=https://cdn.jsdelivr.net/gh/VisualComputing/p5.treegl/p5.treegl.js></script> 
            
            
            
            
            <script src=/showcase/sketches/shaders/Blending/blend.js></script>
          </head>
          <body>
          </body>
        </html>
      "></iframe><h2 id=código>Código
<a class=anchor href=#c%c3%b3digo>#</a></h2><details><summary>Sketch Code</summary><div class=markdown-inner><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>blendShader</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>colorB</span>; <span style=color:#75715e>// picked by user
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>B</span>; <span style=color:#75715e>// vec4 vector sent to shader
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>tex</span>; <span style=color:#75715e>// shader output texture
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>cpickerB</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>bslider</span>; <span style=color:#75715e>// brightness slider
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>bmselect</span>; <span style=color:#75715e>// blending mode select
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>brightness</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>mode</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>img</span>; <span style=color:#75715e>// shader input texture
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>input</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>video_on</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>preload</span>() {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>blendShader</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>readShader</span>(<span style=color:#e6db74>&#39;/showcase/docs/Shaders/fragments/blend.frag&#39;</span>, { <span style=color:#a6e22e>matrices</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>Tree</span>.<span style=color:#a6e22e>NONE</span>, <span style=color:#a6e22e>varyings</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>Tree</span>.<span style=color:#a6e22e>texcoords2</span> });
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>setup</span>() {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>createCanvas</span>(<span style=color:#ae81ff>900</span>, <span style=color:#ae81ff>850</span>, <span style=color:#a6e22e>WEBGL</span>);
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>colorB</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>color</span>(<span style=color:#ae81ff>10</span>, <span style=color:#ae81ff>255</span>, <span style=color:#ae81ff>170</span>);
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>tex</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>createGraphics</span>(<span style=color:#ae81ff>800</span>, <span style=color:#ae81ff>800</span>, <span style=color:#a6e22e>WEBGL</span>);
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>cpickerB</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>createColorPicker</span>(<span style=color:#a6e22e>colorB</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>cpickerB</span>.<span style=color:#a6e22e>position</span>(<span style=color:#ae81ff>100</span>, <span style=color:#ae81ff>600</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>bslider</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>createSlider</span>(<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>0.05</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>bslider</span>.<span style=color:#a6e22e>position</span>(<span style=color:#ae81ff>200</span>, <span style=color:#ae81ff>600</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>bslider</span>.<span style=color:#a6e22e>style</span>(<span style=color:#e6db74>&#39;width&#39;</span>, <span style=color:#e6db74>&#39;80px&#39;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>bmselect</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>createSelect</span>();
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>bmselect</span>.<span style=color:#a6e22e>position</span>(<span style=color:#ae81ff>300</span>, <span style=color:#ae81ff>600</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>bmselect</span>.<span style=color:#a6e22e>option</span>(<span style=color:#e6db74>&#39;MULTIPLY&#39;</span>, <span style=color:#ae81ff>0</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>bmselect</span>.<span style=color:#a6e22e>option</span>(<span style=color:#e6db74>&#39;ADD (LINEAR DODGE)&#39;</span>, <span style=color:#ae81ff>1</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>bmselect</span>.<span style=color:#a6e22e>option</span>(<span style=color:#e6db74>&#39;SCREEN&#39;</span>, <span style=color:#ae81ff>2</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>bmselect</span>.<span style=color:#a6e22e>option</span>(<span style=color:#e6db74>&#39;OVERLAY&#39;</span>, <span style=color:#ae81ff>3</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>bmselect</span>.<span style=color:#a6e22e>option</span>(<span style=color:#e6db74>&#39;DARKEST&#39;</span>, <span style=color:#ae81ff>4</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>bmselect</span>.<span style=color:#a6e22e>option</span>(<span style=color:#e6db74>&#39;LIGHTEST&#39;</span>, <span style=color:#ae81ff>5</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>bmselect</span>.<span style=color:#a6e22e>option</span>(<span style=color:#e6db74>&#39;COLOR BURN&#39;</span>, <span style=color:#ae81ff>6</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>bmselect</span>.<span style=color:#a6e22e>option</span>(<span style=color:#e6db74>&#39;LINEAR BURN&#39;</span>, <span style=color:#ae81ff>7</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>bmselect</span>.<span style=color:#a6e22e>option</span>(<span style=color:#e6db74>&#39;DIFFERENCE&#39;</span>, <span style=color:#ae81ff>8</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>bmselect</span>.<span style=color:#a6e22e>option</span>(<span style=color:#e6db74>&#39;DIVIDE&#39;</span>, <span style=color:#ae81ff>9</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>bmselect</span>.<span style=color:#a6e22e>option</span>(<span style=color:#e6db74>&#39;EXCLUSION&#39;</span>, <span style=color:#ae81ff>10</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>bmselect</span>.<span style=color:#a6e22e>option</span>(<span style=color:#e6db74>&#39;COLOR DODGE&#39;</span>, <span style=color:#ae81ff>11</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>bmselect</span>.<span style=color:#a6e22e>option</span>(<span style=color:#e6db74>&#39;HARD LIGHT&#39;</span>, <span style=color:#ae81ff>12</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>bmselect</span>.<span style=color:#a6e22e>option</span>(<span style=color:#e6db74>&#39;VIVID LIGHT&#39;</span>, <span style=color:#ae81ff>13</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>bmselect</span>.<span style=color:#a6e22e>option</span>(<span style=color:#e6db74>&#39;LINEAR LIGHT&#39;</span>, <span style=color:#ae81ff>14</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>bmselect</span>.<span style=color:#a6e22e>option</span>(<span style=color:#e6db74>&#39;PIN LIGHT&#39;</span>, <span style=color:#ae81ff>15</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>bmselect</span>.<span style=color:#a6e22e>option</span>(<span style=color:#e6db74>&#39;SOFT LIGHT 1&#39;</span>, <span style=color:#ae81ff>16</span>); <span style=color:#75715e>// photoshop
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>bmselect</span>.<span style=color:#a6e22e>option</span>(<span style=color:#e6db74>&#39;SOFT LIGHT 2&#39;</span>, <span style=color:#ae81ff>17</span>); <span style=color:#75715e>// pegtop
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>bmselect</span>.<span style=color:#a6e22e>option</span>(<span style=color:#e6db74>&#39;SOFT LIGHT 3&#39;</span>, <span style=color:#ae81ff>18</span>); <span style=color:#75715e>// ilussions.hu
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>bmselect</span>.<span style=color:#a6e22e>option</span>(<span style=color:#e6db74>&#39;SOFT LIGHT 4&#39;</span>, <span style=color:#ae81ff>19</span>); <span style=color:#75715e>// w3C
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>bmselect</span>.<span style=color:#a6e22e>selected</span>(<span style=color:#e6db74>&#39;MULTIPLY&#39;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>img</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>loadImage</span>(<span style=color:#e6db74>&#39;/showcase/docs/Shaders/resources/coloring.jpg&#39;</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>input</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>createFileInput</span>(<span style=color:#a6e22e>handleFile</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>video_on</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>createCheckbox</span>(<span style=color:#e6db74>&#39;default video&#39;</span>, <span style=color:#66d9ef>false</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>video_on</span>.<span style=color:#a6e22e>changed</span>(() =&gt; {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>video_on</span>.<span style=color:#a6e22e>checked</span>()) {
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>img</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>createVideo</span>([<span style=color:#e6db74>&#39;/showcase/docs/Shaders/resources/coloring.mp4&#39;</span>]);
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>img</span>.<span style=color:#a6e22e>hide</span>();
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>img</span>.<span style=color:#a6e22e>loop</span>();
</span></span><span style=display:flex><span>    } <span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>img</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>loadImage</span>(<span style=color:#e6db74>&#39;/showcase/docs/Shaders/resources/coloring.jpg&#39;</span>);
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>img</span>.<span style=color:#a6e22e>hide</span>();     
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>img</span>.<span style=color:#a6e22e>pause</span>();
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>blendShader</span>.<span style=color:#a6e22e>setUniform</span>(<span style=color:#e6db74>&#39;texture&#39;</span>, <span style=color:#a6e22e>img</span>);
</span></span><span style=display:flex><span>  })
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>draw</span>() {
</span></span><span style=display:flex><span> 
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>colorB</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>cpickerB</span>.<span style=color:#a6e22e>color</span>()
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>background</span>(<span style=color:#ae81ff>255</span>);
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>image</span>(<span style=color:#a6e22e>img</span>, <span style=color:#f92672>-</span><span style=color:#ae81ff>450</span>, <span style=color:#f92672>-</span><span style=color:#ae81ff>400</span>, <span style=color:#ae81ff>400</span>, <span style=color:#ae81ff>400</span>); 
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  <span style=color:#75715e>// vec4 vector sent to shader
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>B</span> <span style=color:#f92672>=</span> [<span style=color:#a6e22e>colorB</span>.<span style=color:#a6e22e>_getRed</span>() <span style=color:#f92672>/</span> <span style=color:#ae81ff>255</span>, <span style=color:#a6e22e>colorB</span>.<span style=color:#a6e22e>_getGreen</span>() <span style=color:#f92672>/</span> <span style=color:#ae81ff>255</span>, <span style=color:#a6e22e>colorB</span>.<span style=color:#a6e22e>_getBlue</span>() <span style=color:#f92672>/</span> <span style=color:#ae81ff>255</span>, <span style=color:#a6e22e>alpha</span>(<span style=color:#a6e22e>colorB</span>) <span style=color:#f92672>/</span> <span style=color:#ae81ff>255</span>] <span style=color:#75715e>// normalized
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>brightness</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>bslider</span>.<span style=color:#a6e22e>value</span>();
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>mode</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>bmselect</span>.<span style=color:#a6e22e>value</span>();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>tex</span>.<span style=color:#a6e22e>shader</span>(<span style=color:#a6e22e>blendShader</span>)
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>blendShader</span>.<span style=color:#a6e22e>setUniform</span>(<span style=color:#e6db74>&#39;texture&#39;</span>, <span style=color:#a6e22e>img</span>); <span style=color:#75715e>// each texel will be color A
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>blendShader</span>.<span style=color:#a6e22e>setUniform</span>(<span style=color:#e6db74>&#39;colorB&#39;</span>, <span style=color:#a6e22e>B</span>); 
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>blendShader</span>.<span style=color:#a6e22e>setUniform</span>(<span style=color:#e6db74>&#39;brightness&#39;</span>, <span style=color:#a6e22e>brightness</span>); 
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>blendShader</span>.<span style=color:#a6e22e>setUniform</span>(<span style=color:#e6db74>&#39;mode&#39;</span>, <span style=color:#a6e22e>mode</span>); 
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>tex</span>.<span style=color:#a6e22e>square</span>();
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>texture</span>(<span style=color:#a6e22e>tex</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>square</span>(<span style=color:#f92672>-</span><span style=color:#ae81ff>450</span>, <span style=color:#f92672>-</span><span style=color:#ae81ff>400</span>, <span style=color:#ae81ff>800</span>);
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>handleFile</span>(<span style=color:#a6e22e>file</span>) {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>file</span>.<span style=color:#a6e22e>type</span> <span style=color:#f92672>===</span> <span style=color:#e6db74>&#39;image&#39;</span>) {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>img</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>createImg</span>(<span style=color:#a6e22e>file</span>.<span style=color:#a6e22e>data</span>, <span style=color:#e6db74>&#39;&#39;</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>img</span>.<span style=color:#a6e22e>hide</span>();
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>file</span>.<span style=color:#a6e22e>type</span> <span style=color:#f92672>===</span> <span style=color:#e6db74>&#39;video&#39;</span>) {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>img</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>createVideo</span>([<span style=color:#a6e22e>file</span>.<span style=color:#a6e22e>data</span>]);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>img</span>.<span style=color:#a6e22e>hide</span>();
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>img</span>.<span style=color:#a6e22e>loop</span>();
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></div></details><details><summary>Blend Shader</summary><div class=markdown-inner><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-glsl data-lang=glsl><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>precision</span> <span style=color:#66d9ef>mediump</span> <span style=color:#66d9ef>float</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>uniform</span> <span style=color:#66d9ef>vec4</span> colorB;
</span></span><span style=display:flex><span><span style=color:#66d9ef>uniform</span> <span style=color:#66d9ef>float</span> brightness; <span style=color:#75715e>// [0, 1]</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>uniform</span> <span style=color:#66d9ef>int</span> mode;
</span></span><span style=display:flex><span><span style=color:#66d9ef>uniform</span> <span style=color:#66d9ef>sampler2D</span> texture;
</span></span><span style=display:flex><span><span style=color:#66d9ef>varying</span> <span style=color:#66d9ef>vec2</span> texcoords2;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>void</span> main() {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>// https://stackoverflow.com/questions/67576655/why-my-texture-coordinates-are-inverted-each-time-i-call-my-glsl-shader-in-p5js</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>vec4</span> colorA <span style=color:#f92672>=</span> texture2D(texture, <span style=color:#66d9ef>vec2</span>(texcoords2.x, <span style=color:#ae81ff>1.0</span> <span style=color:#f92672>-</span> texcoords2.y)); <span style=color:#75715e>// each texel is color A</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> (mode <span style=color:#f92672>==</span> <span style=color:#ae81ff>0</span>) { <span style=color:#75715e>// multiply</span>
</span></span><span style=display:flex><span>    gl_FragColor <span style=color:#f92672>=</span> colorA <span style=color:#f92672>*</span> colorB <span style=color:#f92672>*</span> brightness;
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span> (mode <span style=color:#f92672>==</span> <span style=color:#ae81ff>1</span>) { <span style=color:#75715e>// add (linear dodge)</span>
</span></span><span style=display:flex><span>    gl_FragColor <span style=color:#f92672>=</span> (colorA <span style=color:#f92672>+</span> colorB) <span style=color:#f92672>*</span> brightness;
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span> (mode <span style=color:#f92672>==</span> <span style=color:#ae81ff>2</span>) { <span style=color:#75715e>// screen</span>
</span></span><span style=display:flex><span>    gl_FragColor <span style=color:#f92672>=</span> (<span style=color:#ae81ff>1.</span> <span style=color:#f92672>-</span> (<span style=color:#ae81ff>1.</span> <span style=color:#f92672>-</span> colorA) <span style=color:#f92672>*</span> (<span style=color:#ae81ff>1.</span> <span style=color:#f92672>-</span> colorB)) <span style=color:#f92672>*</span> brightness;
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span> (mode <span style=color:#f92672>==</span> <span style=color:#ae81ff>3</span>) { <span style=color:#75715e>// overlay</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>float</span> R <span style=color:#f92672>=</span> (colorA[<span style=color:#ae81ff>0</span>] <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>0.5</span>) <span style=color:#f92672>?</span> <span style=color:#ae81ff>2.</span> <span style=color:#f92672>*</span> colorA[<span style=color:#ae81ff>0</span>] <span style=color:#f92672>*</span> colorB[<span style=color:#ae81ff>0</span>] <span style=color:#f92672>:</span> (<span style=color:#ae81ff>1.</span> <span style=color:#f92672>-</span> (<span style=color:#ae81ff>1.</span> <span style=color:#f92672>-</span> colorA[<span style=color:#ae81ff>0</span>]) <span style=color:#f92672>*</span> (<span style=color:#ae81ff>1.</span> <span style=color:#f92672>-</span> colorB[<span style=color:#ae81ff>0</span>]));
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>float</span> G <span style=color:#f92672>=</span> (colorA[<span style=color:#ae81ff>1</span>] <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>0.5</span>) <span style=color:#f92672>?</span> <span style=color:#ae81ff>2.</span> <span style=color:#f92672>*</span> colorA[<span style=color:#ae81ff>1</span>] <span style=color:#f92672>*</span> colorB[<span style=color:#ae81ff>1</span>] <span style=color:#f92672>:</span> (<span style=color:#ae81ff>1.</span> <span style=color:#f92672>-</span> (<span style=color:#ae81ff>1.</span> <span style=color:#f92672>-</span> colorA[<span style=color:#ae81ff>1</span>]) <span style=color:#f92672>*</span> (<span style=color:#ae81ff>1.</span> <span style=color:#f92672>-</span> colorB[<span style=color:#ae81ff>1</span>]));
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>float</span> B <span style=color:#f92672>=</span> (colorA[<span style=color:#ae81ff>2</span>] <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>0.5</span>) <span style=color:#f92672>?</span> <span style=color:#ae81ff>2.</span> <span style=color:#f92672>*</span> colorA[<span style=color:#ae81ff>2</span>] <span style=color:#f92672>*</span> colorB[<span style=color:#ae81ff>2</span>] <span style=color:#f92672>:</span> (<span style=color:#ae81ff>1.</span> <span style=color:#f92672>-</span> (<span style=color:#ae81ff>1.</span> <span style=color:#f92672>-</span> colorA[<span style=color:#ae81ff>2</span>]) <span style=color:#f92672>*</span> (<span style=color:#ae81ff>1.</span> <span style=color:#f92672>-</span> colorB[<span style=color:#ae81ff>2</span>]));
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>float</span> A <span style=color:#f92672>=</span> (colorA[<span style=color:#ae81ff>3</span>] <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>0.5</span>) <span style=color:#f92672>?</span> <span style=color:#ae81ff>2.</span> <span style=color:#f92672>*</span> colorA[<span style=color:#ae81ff>3</span>] <span style=color:#f92672>*</span> colorB[<span style=color:#ae81ff>3</span>] <span style=color:#f92672>:</span> (<span style=color:#ae81ff>1.</span> <span style=color:#f92672>-</span> (<span style=color:#ae81ff>1.</span> <span style=color:#f92672>-</span> colorA[<span style=color:#ae81ff>3</span>]) <span style=color:#f92672>*</span> (<span style=color:#ae81ff>1.</span> <span style=color:#f92672>-</span> colorB[<span style=color:#ae81ff>3</span>]));
</span></span><span style=display:flex><span>    gl_FragColor <span style=color:#f92672>=</span> <span style=color:#66d9ef>vec4</span>(R, G, B, A) <span style=color:#f92672>*</span> brightness;
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span> (mode <span style=color:#f92672>==</span> <span style=color:#ae81ff>4</span>) { <span style=color:#75715e>// darkest</span>
</span></span><span style=display:flex><span>    gl_FragColor <span style=color:#f92672>=</span> <span style=color:#66d9ef>vec4</span>(min(colorA[<span style=color:#ae81ff>0</span>], colorB[<span style=color:#ae81ff>0</span>]), 
</span></span><span style=display:flex><span>                        min(colorA[<span style=color:#ae81ff>1</span>], colorB[<span style=color:#ae81ff>1</span>]), 
</span></span><span style=display:flex><span>                        min(colorA[<span style=color:#ae81ff>2</span>], colorB[<span style=color:#ae81ff>2</span>]), 
</span></span><span style=display:flex><span>                        min(colorA[<span style=color:#ae81ff>3</span>], colorB[<span style=color:#ae81ff>3</span>])) <span style=color:#f92672>*</span> brightness;
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span> (mode <span style=color:#f92672>==</span> <span style=color:#ae81ff>5</span>) { <span style=color:#75715e>// lightest</span>
</span></span><span style=display:flex><span>    gl_FragColor <span style=color:#f92672>=</span> <span style=color:#66d9ef>vec4</span>(max(colorA[<span style=color:#ae81ff>0</span>], colorB[<span style=color:#ae81ff>0</span>]), 
</span></span><span style=display:flex><span>                        max(colorA[<span style=color:#ae81ff>1</span>], colorB[<span style=color:#ae81ff>1</span>]), 
</span></span><span style=display:flex><span>                        max(colorA[<span style=color:#ae81ff>2</span>], colorB[<span style=color:#ae81ff>2</span>]), 
</span></span><span style=display:flex><span>                        max(colorA[<span style=color:#ae81ff>3</span>], colorB[<span style=color:#ae81ff>3</span>])) <span style=color:#f92672>*</span> brightness;
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span> (mode <span style=color:#f92672>==</span> <span style=color:#ae81ff>6</span>) { <span style=color:#75715e>// color burn</span>
</span></span><span style=display:flex><span>    gl_FragColor <span style=color:#f92672>=</span> <span style=color:#ae81ff>1.</span> <span style=color:#f92672>-</span> ((<span style=color:#ae81ff>1.</span> <span style=color:#f92672>-</span> colorA) <span style=color:#f92672>/</span> colorB) <span style=color:#f92672>*</span> brightness;
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span> (mode <span style=color:#f92672>==</span> <span style=color:#ae81ff>7</span>) { <span style=color:#75715e>// linear burn</span>
</span></span><span style=display:flex><span>    gl_FragColor <span style=color:#f92672>=</span> (colorA <span style=color:#f92672>+</span> colorB <span style=color:#f92672>-</span> <span style=color:#ae81ff>1.</span>) <span style=color:#f92672>*</span> brightness;
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span> (mode <span style=color:#f92672>==</span> <span style=color:#ae81ff>8</span>) { <span style=color:#75715e>// difference</span>
</span></span><span style=display:flex><span>    gl_FragColor <span style=color:#f92672>=</span> (abs(colorA <span style=color:#f92672>-</span> colorB)) <span style=color:#f92672>*</span> brightness;
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span> (mode <span style=color:#f92672>==</span> <span style=color:#ae81ff>9</span>) { <span style=color:#75715e>// divide</span>
</span></span><span style=display:flex><span>    gl_FragColor <span style=color:#f92672>=</span> (colorA <span style=color:#f92672>/</span> colorB) <span style=color:#f92672>*</span> brightness;
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span> (mode <span style=color:#f92672>==</span> <span style=color:#ae81ff>10</span>) { <span style=color:#75715e>// exclusion</span>
</span></span><span style=display:flex><span>    gl_FragColor <span style=color:#f92672>=</span> (<span style=color:#ae81ff>0.5</span> <span style=color:#f92672>-</span> <span style=color:#ae81ff>2.</span> <span style=color:#f92672>*</span> (colorA <span style=color:#f92672>-</span> <span style=color:#ae81ff>0.5</span>) <span style=color:#f92672>*</span> (colorB <span style=color:#f92672>-</span> <span style=color:#ae81ff>0.5</span>)) <span style=color:#f92672>*</span> brightness;
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span> (mode <span style=color:#f92672>==</span> <span style=color:#ae81ff>11</span>) { <span style=color:#75715e>// color dodge</span>
</span></span><span style=display:flex><span>    gl_FragColor <span style=color:#f92672>=</span> (colorA <span style=color:#f92672>/</span> (<span style=color:#ae81ff>1.</span> <span style=color:#f92672>-</span> colorB)) <span style=color:#f92672>*</span> brightness;
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span> (mode <span style=color:#f92672>==</span> <span style=color:#ae81ff>12</span>) { <span style=color:#75715e>// hard light</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>float</span> R <span style=color:#f92672>=</span> (colorB[<span style=color:#ae81ff>0</span>] <span style=color:#f92672>&gt;</span> <span style=color:#ae81ff>0.5</span>) <span style=color:#f92672>?</span> (<span style=color:#ae81ff>1.</span> <span style=color:#f92672>-</span> (<span style=color:#ae81ff>1.</span> <span style=color:#f92672>-</span> colorA[<span style=color:#ae81ff>0</span>]) <span style=color:#f92672>*</span> (<span style=color:#ae81ff>1.</span> <span style=color:#f92672>-</span> <span style=color:#ae81ff>2.</span> <span style=color:#f92672>*</span> (colorB[<span style=color:#ae81ff>0</span>] <span style=color:#f92672>-</span> <span style=color:#ae81ff>0.5</span>))) <span style=color:#f92672>:</span> colorA[<span style=color:#ae81ff>0</span>] <span style=color:#f92672>*</span> <span style=color:#ae81ff>2.</span> <span style=color:#f92672>*</span> colorB[<span style=color:#ae81ff>0</span>];
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>float</span> G <span style=color:#f92672>=</span> (colorB[<span style=color:#ae81ff>1</span>] <span style=color:#f92672>&gt;</span> <span style=color:#ae81ff>0.5</span>) <span style=color:#f92672>?</span> (<span style=color:#ae81ff>1.</span> <span style=color:#f92672>-</span> (<span style=color:#ae81ff>1.</span> <span style=color:#f92672>-</span> colorA[<span style=color:#ae81ff>1</span>]) <span style=color:#f92672>*</span> (<span style=color:#ae81ff>1.</span> <span style=color:#f92672>-</span> <span style=color:#ae81ff>2.</span> <span style=color:#f92672>*</span> (colorB[<span style=color:#ae81ff>1</span>] <span style=color:#f92672>-</span> <span style=color:#ae81ff>0.5</span>))) <span style=color:#f92672>:</span> colorA[<span style=color:#ae81ff>1</span>] <span style=color:#f92672>*</span> <span style=color:#ae81ff>2.</span> <span style=color:#f92672>*</span> colorB[<span style=color:#ae81ff>1</span>];
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>float</span> B <span style=color:#f92672>=</span> (colorB[<span style=color:#ae81ff>2</span>] <span style=color:#f92672>&gt;</span> <span style=color:#ae81ff>0.5</span>) <span style=color:#f92672>?</span> (<span style=color:#ae81ff>1.</span> <span style=color:#f92672>-</span> (<span style=color:#ae81ff>1.</span> <span style=color:#f92672>-</span> colorA[<span style=color:#ae81ff>2</span>]) <span style=color:#f92672>*</span> (<span style=color:#ae81ff>1.</span> <span style=color:#f92672>-</span> <span style=color:#ae81ff>2.</span> <span style=color:#f92672>*</span> (colorB[<span style=color:#ae81ff>2</span>] <span style=color:#f92672>-</span> <span style=color:#ae81ff>0.5</span>))) <span style=color:#f92672>:</span> colorA[<span style=color:#ae81ff>2</span>] <span style=color:#f92672>*</span> <span style=color:#ae81ff>2.</span> <span style=color:#f92672>*</span> colorB[<span style=color:#ae81ff>2</span>];
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>float</span> A <span style=color:#f92672>=</span> (colorB[<span style=color:#ae81ff>3</span>] <span style=color:#f92672>&gt;</span> <span style=color:#ae81ff>0.5</span>) <span style=color:#f92672>?</span> (<span style=color:#ae81ff>1.</span> <span style=color:#f92672>-</span> (<span style=color:#ae81ff>1.</span> <span style=color:#f92672>-</span> colorA[<span style=color:#ae81ff>3</span>]) <span style=color:#f92672>*</span> (<span style=color:#ae81ff>1.</span> <span style=color:#f92672>-</span> <span style=color:#ae81ff>2.</span> <span style=color:#f92672>*</span> (colorB[<span style=color:#ae81ff>3</span>] <span style=color:#f92672>-</span> <span style=color:#ae81ff>0.5</span>))) <span style=color:#f92672>:</span> colorA[<span style=color:#ae81ff>3</span>] <span style=color:#f92672>*</span> <span style=color:#ae81ff>2.</span> <span style=color:#f92672>*</span> colorB[<span style=color:#ae81ff>3</span>];
</span></span><span style=display:flex><span>    gl_FragColor <span style=color:#f92672>=</span> <span style=color:#66d9ef>vec4</span>(R, G, B, A) <span style=color:#f92672>*</span> brightness;
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span> (mode <span style=color:#f92672>==</span> <span style=color:#ae81ff>13</span>) { <span style=color:#75715e>// vivid light</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>float</span> R <span style=color:#f92672>=</span> (colorB[<span style=color:#ae81ff>0</span>] <span style=color:#f92672>&gt;</span> <span style=color:#ae81ff>0.5</span>) <span style=color:#f92672>?</span> colorA[<span style=color:#ae81ff>0</span>] <span style=color:#f92672>/</span> (<span style=color:#ae81ff>1.</span> <span style=color:#f92672>-</span> <span style=color:#ae81ff>2.</span> <span style=color:#f92672>*</span> (colorB[<span style=color:#ae81ff>0</span>] <span style=color:#f92672>-</span> <span style=color:#ae81ff>0.5</span>)) <span style=color:#f92672>:</span> (<span style=color:#ae81ff>1.</span> <span style=color:#f92672>-</span> (<span style=color:#ae81ff>1.</span> <span style=color:#f92672>-</span> colorA[<span style=color:#ae81ff>0</span>]) <span style=color:#f92672>/</span> (<span style=color:#ae81ff>2.</span> <span style=color:#f92672>*</span> colorB[<span style=color:#ae81ff>0</span>]));
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>float</span> G <span style=color:#f92672>=</span> (colorB[<span style=color:#ae81ff>1</span>] <span style=color:#f92672>&gt;</span> <span style=color:#ae81ff>0.5</span>) <span style=color:#f92672>?</span> colorA[<span style=color:#ae81ff>1</span>] <span style=color:#f92672>/</span> (<span style=color:#ae81ff>1.</span> <span style=color:#f92672>-</span> <span style=color:#ae81ff>2.</span> <span style=color:#f92672>*</span> (colorB[<span style=color:#ae81ff>1</span>] <span style=color:#f92672>-</span> <span style=color:#ae81ff>0.5</span>)) <span style=color:#f92672>:</span> (<span style=color:#ae81ff>1.</span> <span style=color:#f92672>-</span> (<span style=color:#ae81ff>1.</span> <span style=color:#f92672>-</span> colorA[<span style=color:#ae81ff>1</span>]) <span style=color:#f92672>/</span> (<span style=color:#ae81ff>2.</span> <span style=color:#f92672>*</span> colorB[<span style=color:#ae81ff>1</span>]));
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>float</span> B <span style=color:#f92672>=</span> (colorB[<span style=color:#ae81ff>2</span>] <span style=color:#f92672>&gt;</span> <span style=color:#ae81ff>0.5</span>) <span style=color:#f92672>?</span> colorA[<span style=color:#ae81ff>2</span>] <span style=color:#f92672>/</span> (<span style=color:#ae81ff>1.</span> <span style=color:#f92672>-</span> <span style=color:#ae81ff>2.</span> <span style=color:#f92672>*</span> (colorB[<span style=color:#ae81ff>2</span>] <span style=color:#f92672>-</span> <span style=color:#ae81ff>0.5</span>)) <span style=color:#f92672>:</span> (<span style=color:#ae81ff>1.</span> <span style=color:#f92672>-</span> (<span style=color:#ae81ff>1.</span> <span style=color:#f92672>-</span> colorA[<span style=color:#ae81ff>2</span>]) <span style=color:#f92672>/</span> (<span style=color:#ae81ff>2.</span> <span style=color:#f92672>*</span> colorB[<span style=color:#ae81ff>2</span>]));
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>float</span> A <span style=color:#f92672>=</span> (colorB[<span style=color:#ae81ff>3</span>] <span style=color:#f92672>&gt;</span> <span style=color:#ae81ff>0.5</span>) <span style=color:#f92672>?</span> colorA[<span style=color:#ae81ff>3</span>] <span style=color:#f92672>/</span> (<span style=color:#ae81ff>1.</span> <span style=color:#f92672>-</span> <span style=color:#ae81ff>2.</span> <span style=color:#f92672>*</span> (colorB[<span style=color:#ae81ff>3</span>] <span style=color:#f92672>-</span> <span style=color:#ae81ff>0.5</span>)) <span style=color:#f92672>:</span> (<span style=color:#ae81ff>1.</span> <span style=color:#f92672>-</span> (<span style=color:#ae81ff>1.</span> <span style=color:#f92672>-</span> colorA[<span style=color:#ae81ff>3</span>]) <span style=color:#f92672>/</span> (<span style=color:#ae81ff>2.</span> <span style=color:#f92672>*</span> colorB[<span style=color:#ae81ff>3</span>]));
</span></span><span style=display:flex><span>    gl_FragColor <span style=color:#f92672>=</span> <span style=color:#66d9ef>vec4</span>(R, G, B, A) <span style=color:#f92672>*</span> brightness;
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span> (mode <span style=color:#f92672>==</span> <span style=color:#ae81ff>14</span>) { <span style=color:#75715e>// vivid light</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>float</span> R <span style=color:#f92672>=</span> (colorB[<span style=color:#ae81ff>0</span>] <span style=color:#f92672>&gt;</span> <span style=color:#ae81ff>0.5</span>) <span style=color:#f92672>?</span> colorA[<span style=color:#ae81ff>0</span>] <span style=color:#f92672>+</span> <span style=color:#ae81ff>2.</span> <span style=color:#f92672>*</span> (colorB[<span style=color:#ae81ff>0</span>] <span style=color:#f92672>-</span> <span style=color:#ae81ff>0.5</span>) <span style=color:#f92672>:</span> (colorA[<span style=color:#ae81ff>0</span>] <span style=color:#f92672>+</span> <span style=color:#ae81ff>2.</span> <span style=color:#f92672>*</span> colorB[<span style=color:#ae81ff>0</span>] <span style=color:#f92672>-</span> <span style=color:#ae81ff>1.</span>);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>float</span> G <span style=color:#f92672>=</span> (colorB[<span style=color:#ae81ff>1</span>] <span style=color:#f92672>&gt;</span> <span style=color:#ae81ff>0.5</span>) <span style=color:#f92672>?</span> colorA[<span style=color:#ae81ff>1</span>] <span style=color:#f92672>+</span> <span style=color:#ae81ff>2.</span> <span style=color:#f92672>*</span> (colorB[<span style=color:#ae81ff>1</span>] <span style=color:#f92672>-</span> <span style=color:#ae81ff>0.5</span>) <span style=color:#f92672>:</span> (colorA[<span style=color:#ae81ff>1</span>] <span style=color:#f92672>+</span> <span style=color:#ae81ff>2.</span> <span style=color:#f92672>*</span> colorB[<span style=color:#ae81ff>1</span>] <span style=color:#f92672>-</span> <span style=color:#ae81ff>1.</span>);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>float</span> B <span style=color:#f92672>=</span> (colorB[<span style=color:#ae81ff>2</span>] <span style=color:#f92672>&gt;</span> <span style=color:#ae81ff>0.5</span>) <span style=color:#f92672>?</span> colorA[<span style=color:#ae81ff>2</span>] <span style=color:#f92672>+</span> <span style=color:#ae81ff>2.</span> <span style=color:#f92672>*</span> (colorB[<span style=color:#ae81ff>2</span>] <span style=color:#f92672>-</span> <span style=color:#ae81ff>0.5</span>) <span style=color:#f92672>:</span> (colorA[<span style=color:#ae81ff>2</span>] <span style=color:#f92672>+</span> <span style=color:#ae81ff>2.</span> <span style=color:#f92672>*</span> colorB[<span style=color:#ae81ff>2</span>] <span style=color:#f92672>-</span> <span style=color:#ae81ff>1.</span>);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>float</span> A <span style=color:#f92672>=</span> (colorB[<span style=color:#ae81ff>3</span>] <span style=color:#f92672>&gt;</span> <span style=color:#ae81ff>0.5</span>) <span style=color:#f92672>?</span> colorA[<span style=color:#ae81ff>3</span>] <span style=color:#f92672>+</span> <span style=color:#ae81ff>2.</span> <span style=color:#f92672>*</span> (colorB[<span style=color:#ae81ff>3</span>] <span style=color:#f92672>-</span> <span style=color:#ae81ff>0.5</span>) <span style=color:#f92672>:</span> (colorA[<span style=color:#ae81ff>3</span>] <span style=color:#f92672>+</span> <span style=color:#ae81ff>2.</span> <span style=color:#f92672>*</span> colorB[<span style=color:#ae81ff>3</span>] <span style=color:#f92672>-</span> <span style=color:#ae81ff>1.</span>);
</span></span><span style=display:flex><span>    gl_FragColor <span style=color:#f92672>=</span> <span style=color:#66d9ef>vec4</span>(R, G, B, A) <span style=color:#f92672>*</span> brightness;
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span> (mode <span style=color:#f92672>==</span> <span style=color:#ae81ff>15</span>) { <span style=color:#75715e>// pin light</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>float</span> R <span style=color:#f92672>=</span> (colorB[<span style=color:#ae81ff>0</span>] <span style=color:#f92672>&gt;</span> <span style=color:#ae81ff>0.5</span>) <span style=color:#f92672>?</span> max(colorA[<span style=color:#ae81ff>0</span>], <span style=color:#ae81ff>2.</span> <span style=color:#f92672>*</span> (colorB[<span style=color:#ae81ff>0</span>] <span style=color:#f92672>-</span> <span style=color:#ae81ff>0.5</span>)) <span style=color:#f92672>:</span> min(colorA[<span style=color:#ae81ff>0</span>], <span style=color:#ae81ff>2.</span> <span style=color:#f92672>*</span> colorB[<span style=color:#ae81ff>0</span>]);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>float</span> G <span style=color:#f92672>=</span> (colorB[<span style=color:#ae81ff>1</span>] <span style=color:#f92672>&gt;</span> <span style=color:#ae81ff>0.5</span>) <span style=color:#f92672>?</span> max(colorA[<span style=color:#ae81ff>1</span>], <span style=color:#ae81ff>2.</span> <span style=color:#f92672>*</span> (colorB[<span style=color:#ae81ff>1</span>] <span style=color:#f92672>-</span> <span style=color:#ae81ff>0.5</span>)) <span style=color:#f92672>:</span> min(colorA[<span style=color:#ae81ff>1</span>], <span style=color:#ae81ff>2.</span> <span style=color:#f92672>*</span> colorB[<span style=color:#ae81ff>1</span>]);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>float</span> B <span style=color:#f92672>=</span> (colorB[<span style=color:#ae81ff>2</span>] <span style=color:#f92672>&gt;</span> <span style=color:#ae81ff>0.5</span>) <span style=color:#f92672>?</span> max(colorA[<span style=color:#ae81ff>2</span>], <span style=color:#ae81ff>2.</span> <span style=color:#f92672>*</span> (colorB[<span style=color:#ae81ff>2</span>] <span style=color:#f92672>-</span> <span style=color:#ae81ff>0.5</span>)) <span style=color:#f92672>:</span> min(colorA[<span style=color:#ae81ff>2</span>], <span style=color:#ae81ff>2.</span> <span style=color:#f92672>*</span> colorB[<span style=color:#ae81ff>2</span>]);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>float</span> A <span style=color:#f92672>=</span> (colorB[<span style=color:#ae81ff>3</span>] <span style=color:#f92672>&gt;</span> <span style=color:#ae81ff>0.5</span>) <span style=color:#f92672>?</span> max(colorA[<span style=color:#ae81ff>3</span>], <span style=color:#ae81ff>2.</span> <span style=color:#f92672>*</span> (colorB[<span style=color:#ae81ff>3</span>] <span style=color:#f92672>-</span> <span style=color:#ae81ff>0.5</span>)) <span style=color:#f92672>:</span> min(colorA[<span style=color:#ae81ff>3</span>], <span style=color:#ae81ff>2.</span> <span style=color:#f92672>*</span> colorB[<span style=color:#ae81ff>3</span>]);
</span></span><span style=display:flex><span>    gl_FragColor <span style=color:#f92672>=</span> <span style=color:#66d9ef>vec4</span>(R, G, B, A) <span style=color:#f92672>*</span> brightness;    
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span> (mode <span style=color:#f92672>==</span> <span style=color:#ae81ff>16</span>) { <span style=color:#75715e>// soft light photoshop</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>float</span> R <span style=color:#f92672>=</span> (colorB[<span style=color:#ae81ff>0</span>] <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>0.5</span>) <span style=color:#f92672>?</span> <span style=color:#ae81ff>2.</span> <span style=color:#f92672>*</span> colorA[<span style=color:#ae81ff>0</span>] <span style=color:#f92672>*</span> colorB[<span style=color:#ae81ff>0</span>] <span style=color:#f92672>+</span> colorA[<span style=color:#ae81ff>0</span>] <span style=color:#f92672>*</span> colorA[<span style=color:#ae81ff>0</span>] <span style=color:#f92672>*</span> (<span style=color:#ae81ff>1.</span> <span style=color:#f92672>-</span> <span style=color:#ae81ff>2.</span> <span style=color:#f92672>*</span> colorB[<span style=color:#ae81ff>0</span>]) <span style=color:#f92672>:</span> <span style=color:#ae81ff>2.</span> <span style=color:#f92672>*</span> colorA[<span style=color:#ae81ff>0</span>] <span style=color:#f92672>*</span> (<span style=color:#ae81ff>1.</span> <span style=color:#f92672>-</span> colorB[<span style=color:#ae81ff>0</span>]) <span style=color:#f92672>+</span> sqrt(colorA[<span style=color:#ae81ff>0</span>]) <span style=color:#f92672>*</span> (<span style=color:#ae81ff>2.</span> <span style=color:#f92672>*</span> colorB[<span style=color:#ae81ff>0</span>] <span style=color:#f92672>-</span> <span style=color:#ae81ff>1.</span>);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>float</span> G <span style=color:#f92672>=</span> (colorB[<span style=color:#ae81ff>1</span>] <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>0.5</span>) <span style=color:#f92672>?</span> <span style=color:#ae81ff>2.</span> <span style=color:#f92672>*</span> colorA[<span style=color:#ae81ff>1</span>] <span style=color:#f92672>*</span> colorB[<span style=color:#ae81ff>1</span>] <span style=color:#f92672>+</span> colorA[<span style=color:#ae81ff>1</span>] <span style=color:#f92672>*</span> colorA[<span style=color:#ae81ff>1</span>] <span style=color:#f92672>*</span> (<span style=color:#ae81ff>1.</span> <span style=color:#f92672>-</span> <span style=color:#ae81ff>2.</span> <span style=color:#f92672>*</span> colorB[<span style=color:#ae81ff>1</span>]) <span style=color:#f92672>:</span> <span style=color:#ae81ff>2.</span> <span style=color:#f92672>*</span> colorA[<span style=color:#ae81ff>1</span>] <span style=color:#f92672>*</span> (<span style=color:#ae81ff>1.</span> <span style=color:#f92672>-</span> colorB[<span style=color:#ae81ff>1</span>]) <span style=color:#f92672>+</span> sqrt(colorA[<span style=color:#ae81ff>1</span>]) <span style=color:#f92672>*</span> (<span style=color:#ae81ff>2.</span> <span style=color:#f92672>*</span> colorB[<span style=color:#ae81ff>1</span>] <span style=color:#f92672>-</span> <span style=color:#ae81ff>1.</span>);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>float</span> B <span style=color:#f92672>=</span> (colorB[<span style=color:#ae81ff>2</span>] <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>0.5</span>) <span style=color:#f92672>?</span> <span style=color:#ae81ff>2.</span> <span style=color:#f92672>*</span> colorA[<span style=color:#ae81ff>2</span>] <span style=color:#f92672>*</span> colorB[<span style=color:#ae81ff>2</span>] <span style=color:#f92672>+</span> colorA[<span style=color:#ae81ff>2</span>] <span style=color:#f92672>*</span> colorA[<span style=color:#ae81ff>2</span>] <span style=color:#f92672>*</span> (<span style=color:#ae81ff>1.</span> <span style=color:#f92672>-</span> <span style=color:#ae81ff>2.</span> <span style=color:#f92672>*</span> colorB[<span style=color:#ae81ff>2</span>]) <span style=color:#f92672>:</span> <span style=color:#ae81ff>2.</span> <span style=color:#f92672>*</span> colorA[<span style=color:#ae81ff>2</span>] <span style=color:#f92672>*</span> (<span style=color:#ae81ff>1.</span> <span style=color:#f92672>-</span> colorB[<span style=color:#ae81ff>2</span>]) <span style=color:#f92672>+</span> sqrt(colorA[<span style=color:#ae81ff>2</span>]) <span style=color:#f92672>*</span> (<span style=color:#ae81ff>2.</span> <span style=color:#f92672>*</span> colorB[<span style=color:#ae81ff>2</span>] <span style=color:#f92672>-</span> <span style=color:#ae81ff>1.</span>);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>float</span> A <span style=color:#f92672>=</span> (colorB[<span style=color:#ae81ff>3</span>] <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>0.5</span>) <span style=color:#f92672>?</span> <span style=color:#ae81ff>2.</span> <span style=color:#f92672>*</span> colorA[<span style=color:#ae81ff>3</span>] <span style=color:#f92672>*</span> colorB[<span style=color:#ae81ff>3</span>] <span style=color:#f92672>+</span> colorA[<span style=color:#ae81ff>3</span>] <span style=color:#f92672>*</span> colorA[<span style=color:#ae81ff>3</span>] <span style=color:#f92672>*</span> (<span style=color:#ae81ff>1.</span> <span style=color:#f92672>-</span> <span style=color:#ae81ff>2.</span> <span style=color:#f92672>*</span> colorB[<span style=color:#ae81ff>3</span>]) <span style=color:#f92672>:</span> <span style=color:#ae81ff>2.</span> <span style=color:#f92672>*</span> colorA[<span style=color:#ae81ff>3</span>] <span style=color:#f92672>*</span> (<span style=color:#ae81ff>1.</span> <span style=color:#f92672>-</span> colorB[<span style=color:#ae81ff>3</span>]) <span style=color:#f92672>+</span> sqrt(colorA[<span style=color:#ae81ff>3</span>]) <span style=color:#f92672>*</span> (<span style=color:#ae81ff>2.</span> <span style=color:#f92672>*</span> colorB[<span style=color:#ae81ff>3</span>] <span style=color:#f92672>-</span> <span style=color:#ae81ff>1.</span>);
</span></span><span style=display:flex><span>    gl_FragColor <span style=color:#f92672>=</span> <span style=color:#66d9ef>vec4</span>(R, G, B, A) <span style=color:#f92672>*</span> brightness;
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span> (mode <span style=color:#f92672>==</span> <span style=color:#ae81ff>17</span>) { <span style=color:#75715e>// soft light pegtop</span>
</span></span><span style=display:flex><span>    gl_FragColor <span style=color:#f92672>=</span> ((<span style=color:#ae81ff>1.</span> <span style=color:#f92672>-</span> (<span style=color:#ae81ff>2.</span> <span style=color:#f92672>*</span> colorB)) <span style=color:#f92672>*</span> (colorA <span style=color:#f92672>*</span> colorA) <span style=color:#f92672>+</span> (<span style=color:#ae81ff>2.</span> <span style=color:#f92672>*</span> colorB <span style=color:#f92672>*</span> colorA)) <span style=color:#f92672>*</span> brightness;
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span> (mode <span style=color:#f92672>==</span> <span style=color:#ae81ff>18</span>) { <span style=color:#75715e>// soft light illusions.hu</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>float</span> R <span style=color:#f92672>=</span> pow(colorA[<span style=color:#ae81ff>0</span>], pow(<span style=color:#ae81ff>2.</span>, <span style=color:#ae81ff>2.</span> <span style=color:#f92672>*</span> (<span style=color:#ae81ff>0.5</span> <span style=color:#f92672>-</span> colorB[<span style=color:#ae81ff>0</span>])));
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>float</span> G <span style=color:#f92672>=</span> pow(colorA[<span style=color:#ae81ff>1</span>], pow(<span style=color:#ae81ff>2.</span>, <span style=color:#ae81ff>2.</span> <span style=color:#f92672>*</span> (<span style=color:#ae81ff>0.5</span> <span style=color:#f92672>-</span> colorB[<span style=color:#ae81ff>1</span>])));
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>float</span> B <span style=color:#f92672>=</span> pow(colorA[<span style=color:#ae81ff>2</span>], pow(<span style=color:#ae81ff>2.</span>, <span style=color:#ae81ff>2.</span> <span style=color:#f92672>*</span> (<span style=color:#ae81ff>0.5</span> <span style=color:#f92672>-</span> colorB[<span style=color:#ae81ff>2</span>])));
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>float</span> A <span style=color:#f92672>=</span> pow(colorA[<span style=color:#ae81ff>3</span>], pow(<span style=color:#ae81ff>2.</span>, <span style=color:#ae81ff>2.</span> <span style=color:#f92672>*</span> (<span style=color:#ae81ff>0.5</span> <span style=color:#f92672>-</span> colorB[<span style=color:#ae81ff>3</span>])));
</span></span><span style=display:flex><span>    gl_FragColor <span style=color:#f92672>=</span> <span style=color:#66d9ef>vec4</span>(R, G, B, A) <span style=color:#f92672>*</span> brightness;
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span> (mode <span style=color:#f92672>==</span> <span style=color:#ae81ff>19</span>) { <span style=color:#75715e>// soft-light w3c</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>float</span> gRa <span style=color:#f92672>=</span> (colorA[<span style=color:#ae81ff>0</span>] <span style=color:#f92672>&lt;=</span> <span style=color:#ae81ff>0.25</span>) <span style=color:#f92672>?</span> ((<span style=color:#ae81ff>16.</span> <span style=color:#f92672>*</span> colorA[<span style=color:#ae81ff>0</span>] <span style=color:#f92672>-</span> <span style=color:#ae81ff>12.</span>) <span style=color:#f92672>*</span> colorA[<span style=color:#ae81ff>0</span>] <span style=color:#f92672>+</span> <span style=color:#ae81ff>4.</span>) <span style=color:#f92672>*</span> colorA[<span style=color:#ae81ff>0</span>] <span style=color:#f92672>:</span> sqrt(colorA[<span style=color:#ae81ff>0</span>]); 
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>float</span> gGa <span style=color:#f92672>=</span> (colorA[<span style=color:#ae81ff>1</span>] <span style=color:#f92672>&lt;=</span> <span style=color:#ae81ff>0.25</span>) <span style=color:#f92672>?</span> ((<span style=color:#ae81ff>16.</span> <span style=color:#f92672>*</span> colorA[<span style=color:#ae81ff>1</span>] <span style=color:#f92672>-</span> <span style=color:#ae81ff>12.</span>) <span style=color:#f92672>*</span> colorA[<span style=color:#ae81ff>1</span>] <span style=color:#f92672>+</span> <span style=color:#ae81ff>4.</span>) <span style=color:#f92672>*</span> colorA[<span style=color:#ae81ff>1</span>] <span style=color:#f92672>:</span> sqrt(colorA[<span style=color:#ae81ff>1</span>]); 
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>float</span> gBa <span style=color:#f92672>=</span> (colorA[<span style=color:#ae81ff>2</span>] <span style=color:#f92672>&lt;=</span> <span style=color:#ae81ff>0.25</span>) <span style=color:#f92672>?</span> ((<span style=color:#ae81ff>16.</span> <span style=color:#f92672>*</span> colorA[<span style=color:#ae81ff>2</span>] <span style=color:#f92672>-</span> <span style=color:#ae81ff>12.</span>) <span style=color:#f92672>*</span> colorA[<span style=color:#ae81ff>2</span>] <span style=color:#f92672>+</span> <span style=color:#ae81ff>4.</span>) <span style=color:#f92672>*</span> colorA[<span style=color:#ae81ff>2</span>] <span style=color:#f92672>:</span> sqrt(colorA[<span style=color:#ae81ff>2</span>]); 
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>float</span> gAa <span style=color:#f92672>=</span> (colorA[<span style=color:#ae81ff>3</span>] <span style=color:#f92672>&lt;=</span> <span style=color:#ae81ff>0.25</span>) <span style=color:#f92672>?</span> ((<span style=color:#ae81ff>16.</span> <span style=color:#f92672>*</span> colorA[<span style=color:#ae81ff>3</span>] <span style=color:#f92672>-</span> <span style=color:#ae81ff>12.</span>) <span style=color:#f92672>*</span> colorA[<span style=color:#ae81ff>3</span>] <span style=color:#f92672>+</span> <span style=color:#ae81ff>4.</span>) <span style=color:#f92672>*</span> colorA[<span style=color:#ae81ff>3</span>] <span style=color:#f92672>:</span> sqrt(colorA[<span style=color:#ae81ff>3</span>]);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>float</span> R <span style=color:#f92672>=</span> (colorB[<span style=color:#ae81ff>0</span>] <span style=color:#f92672>&lt;=</span> <span style=color:#ae81ff>0.5</span>) <span style=color:#f92672>?</span> colorA[<span style=color:#ae81ff>0</span>] <span style=color:#f92672>-</span> (<span style=color:#ae81ff>1.</span> <span style=color:#f92672>-</span> <span style=color:#ae81ff>2.</span> <span style=color:#f92672>*</span> colorB[<span style=color:#ae81ff>0</span>]) <span style=color:#f92672>*</span> colorA[<span style=color:#ae81ff>0</span>] <span style=color:#f92672>*</span> (<span style=color:#ae81ff>1.</span> <span style=color:#f92672>-</span> colorA[<span style=color:#ae81ff>0</span>]) <span style=color:#f92672>:</span> colorA[<span style=color:#ae81ff>0</span>] <span style=color:#f92672>+</span> (<span style=color:#ae81ff>2.</span> <span style=color:#f92672>*</span> colorB[<span style=color:#ae81ff>0</span>] <span style=color:#f92672>-</span> <span style=color:#ae81ff>1.</span>) <span style=color:#f92672>*</span> (gRa <span style=color:#f92672>-</span> colorA[<span style=color:#ae81ff>0</span>]);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>float</span> G <span style=color:#f92672>=</span> (colorB[<span style=color:#ae81ff>1</span>] <span style=color:#f92672>&lt;=</span> <span style=color:#ae81ff>0.5</span>) <span style=color:#f92672>?</span> colorA[<span style=color:#ae81ff>1</span>] <span style=color:#f92672>-</span> (<span style=color:#ae81ff>1.</span> <span style=color:#f92672>-</span> <span style=color:#ae81ff>2.</span> <span style=color:#f92672>*</span> colorB[<span style=color:#ae81ff>1</span>]) <span style=color:#f92672>*</span> colorA[<span style=color:#ae81ff>1</span>] <span style=color:#f92672>*</span> (<span style=color:#ae81ff>1.</span> <span style=color:#f92672>-</span> colorA[<span style=color:#ae81ff>1</span>]) <span style=color:#f92672>:</span> colorA[<span style=color:#ae81ff>1</span>] <span style=color:#f92672>+</span> (<span style=color:#ae81ff>2.</span> <span style=color:#f92672>*</span> colorB[<span style=color:#ae81ff>1</span>] <span style=color:#f92672>-</span> <span style=color:#ae81ff>1.</span>) <span style=color:#f92672>*</span> (gGa <span style=color:#f92672>-</span> colorA[<span style=color:#ae81ff>1</span>]);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>float</span> B <span style=color:#f92672>=</span> (colorB[<span style=color:#ae81ff>2</span>] <span style=color:#f92672>&lt;=</span> <span style=color:#ae81ff>0.5</span>) <span style=color:#f92672>?</span> colorA[<span style=color:#ae81ff>2</span>] <span style=color:#f92672>-</span> (<span style=color:#ae81ff>1.</span> <span style=color:#f92672>-</span> <span style=color:#ae81ff>2.</span> <span style=color:#f92672>*</span> colorB[<span style=color:#ae81ff>2</span>]) <span style=color:#f92672>*</span> colorA[<span style=color:#ae81ff>2</span>] <span style=color:#f92672>*</span> (<span style=color:#ae81ff>1.</span> <span style=color:#f92672>-</span> colorA[<span style=color:#ae81ff>2</span>]) <span style=color:#f92672>:</span> colorA[<span style=color:#ae81ff>2</span>] <span style=color:#f92672>+</span> (<span style=color:#ae81ff>2.</span> <span style=color:#f92672>*</span> colorB[<span style=color:#ae81ff>2</span>] <span style=color:#f92672>-</span> <span style=color:#ae81ff>1.</span>) <span style=color:#f92672>*</span> (gBa <span style=color:#f92672>-</span> colorA[<span style=color:#ae81ff>2</span>]);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>float</span> A <span style=color:#f92672>=</span> (colorB[<span style=color:#ae81ff>3</span>] <span style=color:#f92672>&lt;=</span> <span style=color:#ae81ff>0.5</span>) <span style=color:#f92672>?</span> colorA[<span style=color:#ae81ff>3</span>] <span style=color:#f92672>-</span> (<span style=color:#ae81ff>1.</span> <span style=color:#f92672>-</span> <span style=color:#ae81ff>2.</span> <span style=color:#f92672>*</span> colorB[<span style=color:#ae81ff>3</span>]) <span style=color:#f92672>*</span> colorA[<span style=color:#ae81ff>3</span>] <span style=color:#f92672>*</span> (<span style=color:#ae81ff>1.</span> <span style=color:#f92672>-</span> colorA[<span style=color:#ae81ff>3</span>]) <span style=color:#f92672>:</span> colorA[<span style=color:#ae81ff>3</span>] <span style=color:#f92672>+</span> (<span style=color:#ae81ff>2.</span> <span style=color:#f92672>*</span> colorB[<span style=color:#ae81ff>3</span>] <span style=color:#f92672>-</span> <span style=color:#ae81ff>1.</span>) <span style=color:#f92672>*</span> (gAa <span style=color:#f92672>-</span> colorA[<span style=color:#ae81ff>3</span>]);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    gl_FragColor <span style=color:#f92672>=</span> <span style=color:#66d9ef>vec4</span>(R, G, B, A) <span style=color:#f92672>*</span> brightness;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  <span style=color:#75715e>// http://www.deepskycolors.com/archivo/2010/04/21/formulas-for-Photoshop-blending-modes.html</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></div></details><h2 id=4-conclusiones>4. Conclusiones
<a class=anchor href=#4-conclusiones>#</a></h2><p>Al considerar el uso de la técnica de color blending, se pueden extraer las siguientes conclusiones:</p><p>Transiciones suaves: El color blending es una técnica efectiva para lograr transiciones suaves entre colores, lo que permite crear efectos visuales atractivos y realistas. Esto es especialmente útil en campos como el diseño gráfico, la ilustración y la fotografía, donde se busca suavizar las transiciones y lograr mezclas armoniosas.</p><p>Versatilidad creativa: El color blending brinda a los artistas y diseñadores una herramienta versátil para la expresión creativa. Permite la combinación de diferentes tonalidades, la creación de sombras y luces graduales, así como la posibilidad de generar degradados y efectos de mezcla únicos. Esto amplía las opciones disponibles para la creación de obras visuales y permite explorar diferentes estilos y efectos.</p><p>Realismo y profundidad: Al utilizar el color blending de manera adecuada, es posible lograr una mayor sensación de realismo y profundidad en una imagen. Al mezclar colores de forma gradual y natural, se pueden crear efectos de sombreado, iluminación y texturas que añaden una mayor sensación de volumen y detalle a la representación visual.</p><p>Herramientas digitales: Con el avance de la tecnología y las herramientas digitales, el color blending se ha vuelto aún más accesible y poderoso. Los programas de edición de imágenes y diseño gráfico ofrecen una amplia gama de herramientas y opciones para controlar y ajustar la mezcla de colores de manera precisa y flexible. Esto permite a los artistas y diseñadores tener un mayor control sobre el proceso creativo y obtener resultados más precisos y personalizados.</p><h2 id=5-trabajo-a-futuro>5. Trabajo a futuro
<a class=anchor href=#5-trabajo-a-futuro>#</a></h2><p>Considerando las tendencias actuales y posibles aplicaciones futuras, se pueden vislumbrar las siguientes oportunidades para el color blending:</p><p>Realidad aumentada y virtual: El color blending podría desempeñar un papel importante en la integración de elementos virtuales con el entorno real en aplicaciones de realidad aumentada y virtual. Al utilizar técnicas de mezcla de colores más avanzadas y precisas, se podrían lograr transiciones más suaves y efectos de integración más realistas entre objetos virtuales y el mundo real.</p><p>Diseño de interfaces y experiencias de usuario: El color blending puede ser una herramienta poderosa en el diseño de interfaces y experiencias de usuario más inmersivas y atractivas. Al combinar colores de manera fluida y sutil, se pueden crear efectos visuales sofisticados que mejoren la usabilidad y la estética de las aplicaciones y los sitios web.</p><p>Animación y efectos visuales: En el campo de la animación y los efectos visuales, el color blending seguirá siendo relevante. Con la creciente demanda de efectos visuales de alta calidad en películas, series, videojuegos y publicidad, el control preciso sobre la mezcla de colores permitirá lograr transiciones y efectos más suaves y realistas en las animaciones y escenas visuales.</p><p>Generación de arte generativo: El color blending podría ser utilizado en técnicas de arte generativo, donde algoritmos y sistemas de inteligencia artificial crean obras de arte de forma autónoma. Al permitir la mezcla de colores de manera dinámica y creativa, se podrían generar composiciones visuales únicas y sorprendentes, explorando nuevas posibilidades artísticas.</p><p>Diseño de productos y moda: En el diseño de productos y moda, el color blending puede ser utilizado para crear combinaciones de colores atractivas y modernas. Al suavizar las transiciones entre tonos y lograr degradados armoniosos, se pueden diseñar productos y prendas de vestir visualmente atractivos que reflejen las últimas tendencias de color.</p></article><footer class=book-footer><div class="flex flex-wrap justify-between"><div><a class="flex align-center" href=https://github.com/visualcomputing/showcase/commit/3bd2a2b23622ede9e20989d16ccd914fe0039fe8 title='Last modified by Jaime | June 27, 2023' target=_blank rel=noopener><img src=/showcase/svg/calendar.svg class=book-icon alt=Calendar>
<span>June 27, 2023</span></a></div></div><script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){if(window.getSelection().toString())return;e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script></footer><div class=book-comments></div><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><nav id=TableOfContents><ul><li><ul><li><a href=#exercise>Exercise</a></li><li><a href=#coloring>Coloring</a></li><li><a href=#color-blender>Color Blender</a></li><li><a href=#1-introducción>1. Introducción</a></li><li><a href=#2-antecedentes-y-trabajo-previo>2. Antecedentes y trabajo previo</a></li><li><a href=#3-solución>3. Solución</a><ul><li><a href=#controls>Controls</a></li></ul></li><li><a href=#código>Código</a></li><li><a href=#4-conclusiones>4. Conclusiones</a></li><li><a href=#5-trabajo-a-futuro>5. Trabajo a futuro</a></li></ul></li></ul></nav></div></aside></main></body></html>