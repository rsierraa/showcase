<!doctype html><html lang=en-us dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Exercise # Implement other coloring brightness tools such as HSV value V, HSL lightness L or Component average. Implement texture tinting by mixing color and texel interpolated data. 1. Introducción y contexto
El mapeo de texturas en transportar una textura (una imágen) a una superficie dibujada. Usualmente, para cubrir de la manera más eficiente distintas formas geométricas, se utiliza el mapeo a triángulos, por lo que se implementa la interpolación con coordenadas baricéntricas para lograr tal efecto."><meta name=theme-color content="#FFFFFF"><meta name=color-scheme content="light dark"><meta property="og:title" content="Texturing"><meta property="og:description" content="Exercise # Implement other coloring brightness tools such as HSV value V, HSL lightness L or Component average. Implement texture tinting by mixing color and texel interpolated data. 1. Introducción y contexto
El mapeo de texturas en transportar una textura (una imágen) a una superficie dibujada. Usualmente, para cubrir de la manera más eficiente distintas formas geométricas, se utiliza el mapeo a triángulos, por lo que se implementa la interpolación con coordenadas baricéntricas para lograr tal efecto."><meta property="og:type" content="article"><meta property="og:url" content="https://visualcomputing.github.io/showcase/docs/Shaders/Texturing/"><meta property="article:section" content="docs"><meta property="article:modified_time" content="2023-06-17T14:26:11-05:00"><title>Texturing | Visual Computing 2023-1</title><link rel=manifest href=/showcase/manifest.json><link rel=icon href=/showcase/favicon.png type=image/x-icon><link rel=stylesheet href=/showcase/book.min.4b35fed0bea034bbc19c89c71e14b73fb9c68cfcc586b9382adfb9b7b103ba06.css integrity="sha256-SzX+0L6gNLvBnInHHhS3P7nGjPzFhrk4Kt+5t7EDugY=" crossorigin=anonymous><script defer src=/showcase/flexsearch.min.js></script>
<script defer src=/showcase/en.search.min.3a8d658c77eb93c7f12a2b8af49a700131e474f288eefb605d9fa61576dbe5a7.js integrity="sha256-Oo1ljHfrk8fxKiuK9JpwATHkdPKI7vtgXZ+mFXbb5ac=" crossorigin=anonymous></script></head><body dir=ltr><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a class="flex align-center" href=/showcase/><span>Visual Computing 2023-1</span></a></h2><div class=book-search><input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><ul><li><input type=checkbox id=section-7e4921a1bef13fc49e19193dc1bfdc8f class=toggle>
<label for=section-7e4921a1bef13fc49e19193dc1bfdc8f class="flex justify-between"><a href=/showcase/docs/members/>Members</a></label><ul><li><a href=/showcase/docs/members/Adrian/>Adrian</a></li><li><a href=/showcase/docs/members/Jaime/>Jaime</a></li><li><a href=/showcase/docs/members/Rodrigo/>Rodrigo</a></li></ul></li><li class=book-section-flat><a href=/showcase/docs/Shaders/>Shaders</a><ul><li><a href=/showcase/docs/Shaders/coloring/>Coloring</a></li><li><a href=/showcase/docs/Shaders/posteffects/>Post Effects</a></li><li><a href=/showcase/docs/Shaders/Texturing/ class=active>Texturing</a></li><li><a href=/showcase/docs/Shaders/ImageProcessing/>Image Processing</a></li><li><a href=/showcase/docs/Shaders/ProceduralTexturing/>Procedural Texturing</a></li><li><a href=/showcase/docs/Shaders/SpatialCoherence/>Spatial Coherence</a></li><li><a href=/showcase/docs/Shaders/Photomosaic/>Photomosaic</a></li></ul></li><li class=book-section-flat><a href=/showcase/docs/Visual-Illusions/>Visual Illusions</a><ul><li><input type=checkbox id=section-99e4a0d55300f831d740177d881e77f4 class=toggle>
<label for=section-99e4a0d55300f831d740177d881e77f4 class="flex justify-between"><a href=/showcase/docs/Visual-Illusions/Coloring/>Coloring</a></label><ul><li><a href=/showcase/docs/Visual-Illusions/Coloring/Color-blindness/>Color Blindness</a></li></ul></li><li><input type=checkbox id=section-bd03a1ba8998ae8c9df2b933d511e416 class=toggle>
<label for=section-bd03a1ba8998ae8c9df2b933d511e416 class="flex justify-between"><a href=/showcase/docs/Visual-Illusions/Mach-Bands/>Mach Bands</a></label><ul><li><a href=/showcase/docs/Visual-Illusions/Mach-Bands/Terrain-with-Perlin-noise/>Terrain With Perlin Noise</a></li></ul></li><li><input type=checkbox id=section-7a7081fda5df7dbf85b6d879015de52b class=toggle>
<label for=section-7a7081fda5df7dbf85b6d879015de52b class="flex justify-between"><a href=/showcase/docs/Visual-Illusions/Masking/>Masking</a></label><ul><li><a href=/showcase/docs/Visual-Illusions/Masking/Visual-masking/>Visual Masking</a></li><li><a href=/showcase/docs/Visual-Illusions/Masking/Convolution-masks/>Convolution Masks</a></li></ul></li><li><input type=checkbox id=section-8f4e9ca131433d238729d21435de5a65 class=toggle>
<label for=section-8f4e9ca131433d238729d21435de5a65 class="flex justify-between"><a href=/showcase/docs/Visual-Illusions/Spatial-Coherence/>Spatial Coherence</a></label><ul><li><a href=/showcase/docs/Visual-Illusions/Spatial-Coherence/Pixelator-demo/>Pixelator Demo</a></li></ul></li></ul></li></ul></nav><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/showcase/svg/menu.svg class=book-icon alt=Menu></label>
<strong>Texturing</strong>
<label for=toc-control><img src=/showcase/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><ul><li><a href=#exercise>Exercise</a></li><li><a href=#brightness--tinting>Brightness & Tinting</a><ul><li><a href=#controles>Controles</a></li></ul></li></ul></li></ul></nav></aside></header><article class=markdown><h2 id=exercise>Exercise
<a class=anchor href=#exercise>#</a></h2><ol><li>Implement other coloring brightness tools such as HSV value V, HSL lightness L or Component average.</li><li>Implement texture tinting by mixing color and texel interpolated data.</li></ol><p><strong>1. Introducción y contexto</strong></p><p>El mapeo de texturas en transportar una textura (una imágen) a una superficie dibujada. Usualmente, para cubrir de la manera más eficiente distintas formas geométricas, se utiliza el mapeo a triángulos, por lo que se implementa la interpolación con coordenadas baricéntricas para lograr tal efecto.</p><blockquote class="book-hint info"><a href="https://www.scratchapixel.com/lessons/3d-basic-rendering/ray-tracing-rendering-a-triangle/barycentric-coordinates.html#:~:text=In%20other%20words%2C%20barycentric%20coordinates,normal%20at%20the%20intersection%20point">https://www.scratchapixel.com/lessons/3d-basic-rendering/ray-tracing-rendering-a-triangle/barycentric-coordinates.html#:~:text=In%20other%20words%2C%20barycentric%20coordinates,normal%20at%20the%20intersection%20point</a>.</blockquote><h2 id=brightness--tinting>Brightness & Tinting
<a class=anchor href=#brightness--tinting>#</a></h2><p>El ejercicio se compone de dos partes: La primera consiste en la visualización de la iluminación de la imagen y la segunda es la aplicación de tinting sobre la imagen utilizando diferentes blending modes.</p><p>La iluminación se implementó con un brightness shader usando las siguientes cuatro métricas: luma, value (HSV), lightness (HSL) e intensidad (HSI).</p><p>Para cada texel se calcula la métrica indicada y ese valor (normalizado [0..1]) se aplica sobre un vector vec4 en el shader para pintar cada pixel, de manera que la visualización es en escala de grises.</p><p>Para el tinting, desde el sketch, se dibuja un rectángulo sobre la imagen cargada. Cada uno de los cuatro vertices tiene un color asociado que puede ser seleccionado por el usuario. Estos valores le sirven al vertex shader para hacer la interpolación de los colores de los pixeles de todo el rectángulo.</p><p>El tinting shader recibe interpoladas las coordernadas de la imagen cargada (texcoords2) y el color (color4) interpolado desde el vertex shader. Con esas dos variables, el tinting shader aplica el blending mode seleccionado. El color A es el color del texel cuyas coordenadas son texcoords2 y el color B es el color que llegó interpolado desde el vertex shader.</p><p>Al aplicar la operación texel a texel, el color resultante se va pintando, y la imagen queda tinturada con el blending mode aplicado.</p><p>Los blending modes aplicados son los mismos vistos en <strong>Coloring</strong>.</p><h3 id=controles>Controles
<a class=anchor href=#controles>#</a></h3><ul><li><strong>Botón Choose File</strong>: para cargar una imagen o video</li><li><strong>Checkbox Default Video</strong>: marcar para usar el video por defecto, desmarcar para usar la imagen por defecto</li><li><strong>Select</strong>: selecciona entre original, luma, value, lightness, intensity o tinting</li><li><strong>Select (Blending Mode)</strong>: selecciona el blending mode que desea utilizar (visible cuando se selecciona tinting)</li><li><strong>Slider</strong>: controla el brillo (visible cuando se selecciona tinting)</li><li><strong>Color Pickers</strong>: para seleccionar los colores que se aplicarán en el tinting</li></ul><iframe id=brightness style=width:800px;height:650px srcdoc="
        <!DOCTYPE html>
        <html>
          <head>
            <script src=https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.6.0/p5.min.js></script>
            <script src=https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.6.0/addons/p5.sound.min.js></script>
             <script src=https://cdn.jsdelivr.net/gh/VisualComputing/p5.treegl/p5.treegl.js></script> 
            
            
            
            
            <script src=/showcase/sketches/shaders/texturing/brightness.js></script>
          </head>
          <body>
          </body>
        </html>
      "></iframe>
<details><summary>Sketch Code</summary><div class=markdown-inner><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>brightnessShader</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>tintingShader</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>img</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>input</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>mode</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>lmselect</span>; <span style=color:#75715e>// lightness mode select
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>colorA</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>colorB</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>colorC</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>colorD</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>cpcikerA</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>cpcikerB</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>cpcikerC</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>cpcikerD</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>bmselect</span>; <span style=color:#75715e>// blending mode select
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>bmode</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>bslider</span>; <span style=color:#75715e>// brightness slider
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>video_on</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>preload</span>() {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>brightnessShader</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>readShader</span>(<span style=color:#e6db74>&#39;/showcase/docs/shaders/fragments/brightness.frag&#39;</span>, { <span style=color:#a6e22e>varyings</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>Tree</span>.<span style=color:#a6e22e>texcoords2</span> });
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>tintingShader</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>readShader</span>(<span style=color:#e6db74>&#39;/showcase/docs/shaders/fragments/tinting.frag&#39;</span>, { <span style=color:#a6e22e>varyings</span><span style=color:#f92672>:</span> [<span style=color:#a6e22e>Tree</span>.<span style=color:#a6e22e>texcoords2</span> <span style=color:#f92672>|</span> <span style=color:#a6e22e>Tree</span>.<span style=color:#a6e22e>color4</span>] });
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>setup</span>() {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>createCanvas</span>(<span style=color:#ae81ff>700</span>, <span style=color:#ae81ff>500</span>, <span style=color:#a6e22e>WEBGL</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>noStroke</span>();
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>textureMode</span>(<span style=color:#a6e22e>NORMAL</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>lmselect</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>createSelect</span>();
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>lmselect</span>.<span style=color:#a6e22e>position</span>(<span style=color:#ae81ff>10</span>, <span style=color:#ae81ff>10</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>lmselect</span>.<span style=color:#a6e22e>option</span>(<span style=color:#e6db74>&#39;original&#39;</span>, <span style=color:#ae81ff>0</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>lmselect</span>.<span style=color:#a6e22e>option</span>(<span style=color:#e6db74>&#39;luma&#39;</span>, <span style=color:#ae81ff>1</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>lmselect</span>.<span style=color:#a6e22e>option</span>(<span style=color:#e6db74>&#39;value&#39;</span>, <span style=color:#ae81ff>2</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>lmselect</span>.<span style=color:#a6e22e>option</span>(<span style=color:#e6db74>&#39;lightness&#39;</span>, <span style=color:#ae81ff>3</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>lmselect</span>.<span style=color:#a6e22e>option</span>(<span style=color:#e6db74>&#39;intensity&#39;</span>, <span style=color:#ae81ff>4</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>lmselect</span>.<span style=color:#a6e22e>option</span>(<span style=color:#e6db74>&#39;tinting&#39;</span>, <span style=color:#ae81ff>5</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>lmselect</span>.<span style=color:#a6e22e>selected</span>(<span style=color:#e6db74>&#39;original&#39;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>img</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>loadImage</span>(<span style=color:#e6db74>&#39;/showcase/docs/shaders/resources/fire_breathing.png&#39;</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>input</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>createFileInput</span>(<span style=color:#a6e22e>handleFile</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>colorA</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;red&#34;</span>;
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>colorB</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;green&#34;</span>;
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>colorC</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;blue&#34;</span>;
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>colorD</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;yellow&#34;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>cpickerA</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>createColorPicker</span>(<span style=color:#a6e22e>colorA</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>cpickerA</span>.<span style=color:#a6e22e>position</span>(<span style=color:#ae81ff>20</span>, <span style=color:#ae81ff>40</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>cpickerA</span>.<span style=color:#a6e22e>hide</span>();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>cpickerB</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>createColorPicker</span>(<span style=color:#a6e22e>colorB</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>cpickerB</span>.<span style=color:#a6e22e>position</span>(<span style=color:#ae81ff>640</span>, <span style=color:#ae81ff>40</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>cpickerB</span>.<span style=color:#a6e22e>hide</span>();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>cpickerC</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>createColorPicker</span>(<span style=color:#a6e22e>colorC</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>cpickerC</span>.<span style=color:#a6e22e>position</span>(<span style=color:#ae81ff>20</span>, <span style=color:#ae81ff>440</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>cpickerC</span>.<span style=color:#a6e22e>hide</span>();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>cpickerD</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>createColorPicker</span>(<span style=color:#a6e22e>colorD</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>cpickerD</span>.<span style=color:#a6e22e>position</span>(<span style=color:#ae81ff>640</span>, <span style=color:#ae81ff>440</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>cpickerD</span>.<span style=color:#a6e22e>hide</span>();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>bslider</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>createSlider</span>(<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>0.05</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>bslider</span>.<span style=color:#a6e22e>position</span>(<span style=color:#ae81ff>280</span>, <span style=color:#ae81ff>10</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>bslider</span>.<span style=color:#a6e22e>style</span>(<span style=color:#e6db74>&#39;width&#39;</span>, <span style=color:#e6db74>&#39;80px&#39;</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>bslider</span>.<span style=color:#a6e22e>hide</span>();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>bmselect</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>createSelect</span>();
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>bmselect</span>.<span style=color:#a6e22e>position</span>(<span style=color:#ae81ff>100</span>, <span style=color:#ae81ff>10</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>bmselect</span>.<span style=color:#a6e22e>option</span>(<span style=color:#e6db74>&#39;MULTIPLY&#39;</span>, <span style=color:#ae81ff>0</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>bmselect</span>.<span style=color:#a6e22e>option</span>(<span style=color:#e6db74>&#39;ADD (LINEAR DODGE)&#39;</span>, <span style=color:#ae81ff>1</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>bmselect</span>.<span style=color:#a6e22e>option</span>(<span style=color:#e6db74>&#39;SCREEN&#39;</span>, <span style=color:#ae81ff>2</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>bmselect</span>.<span style=color:#a6e22e>option</span>(<span style=color:#e6db74>&#39;OVERLAY&#39;</span>, <span style=color:#ae81ff>3</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>bmselect</span>.<span style=color:#a6e22e>option</span>(<span style=color:#e6db74>&#39;DARKEST&#39;</span>, <span style=color:#ae81ff>4</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>bmselect</span>.<span style=color:#a6e22e>option</span>(<span style=color:#e6db74>&#39;LIGHTEST&#39;</span>, <span style=color:#ae81ff>5</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>bmselect</span>.<span style=color:#a6e22e>option</span>(<span style=color:#e6db74>&#39;COLOR BURN&#39;</span>, <span style=color:#ae81ff>6</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>bmselect</span>.<span style=color:#a6e22e>option</span>(<span style=color:#e6db74>&#39;LINEAR BURN&#39;</span>, <span style=color:#ae81ff>7</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>bmselect</span>.<span style=color:#a6e22e>option</span>(<span style=color:#e6db74>&#39;DIFFERENCE&#39;</span>, <span style=color:#ae81ff>8</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>bmselect</span>.<span style=color:#a6e22e>option</span>(<span style=color:#e6db74>&#39;DIVIDE&#39;</span>, <span style=color:#ae81ff>9</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>bmselect</span>.<span style=color:#a6e22e>option</span>(<span style=color:#e6db74>&#39;EXCLUSION&#39;</span>, <span style=color:#ae81ff>10</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>bmselect</span>.<span style=color:#a6e22e>option</span>(<span style=color:#e6db74>&#39;COLOR DODGE&#39;</span>, <span style=color:#ae81ff>11</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>bmselect</span>.<span style=color:#a6e22e>option</span>(<span style=color:#e6db74>&#39;HARD LIGHT&#39;</span>, <span style=color:#ae81ff>12</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>bmselect</span>.<span style=color:#a6e22e>option</span>(<span style=color:#e6db74>&#39;VIVID LIGHT&#39;</span>, <span style=color:#ae81ff>13</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>bmselect</span>.<span style=color:#a6e22e>option</span>(<span style=color:#e6db74>&#39;LINEAR LIGHT&#39;</span>, <span style=color:#ae81ff>14</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>bmselect</span>.<span style=color:#a6e22e>option</span>(<span style=color:#e6db74>&#39;PIN LIGHT&#39;</span>, <span style=color:#ae81ff>15</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>bmselect</span>.<span style=color:#a6e22e>option</span>(<span style=color:#e6db74>&#39;SOFT LIGHT 1&#39;</span>, <span style=color:#ae81ff>16</span>); <span style=color:#75715e>// photoshop
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>bmselect</span>.<span style=color:#a6e22e>option</span>(<span style=color:#e6db74>&#39;SOFT LIGHT 2&#39;</span>, <span style=color:#ae81ff>17</span>); <span style=color:#75715e>// pegtop
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>bmselect</span>.<span style=color:#a6e22e>option</span>(<span style=color:#e6db74>&#39;SOFT LIGHT 3&#39;</span>, <span style=color:#ae81ff>18</span>); <span style=color:#75715e>// ilussions.hu
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>bmselect</span>.<span style=color:#a6e22e>option</span>(<span style=color:#e6db74>&#39;SOFT LIGHT 4&#39;</span>, <span style=color:#ae81ff>19</span>); <span style=color:#75715e>// w3C
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>bmselect</span>.<span style=color:#a6e22e>selected</span>(<span style=color:#e6db74>&#39;MULTIPLY&#39;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>bmselect</span>.<span style=color:#a6e22e>hide</span>();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>video_on</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>createCheckbox</span>(<span style=color:#e6db74>&#39;default video&#39;</span>, <span style=color:#66d9ef>false</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>video_on</span>.<span style=color:#a6e22e>changed</span>(() =&gt; {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>video_on</span>.<span style=color:#a6e22e>checked</span>()) {
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>img</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>createVideo</span>([<span style=color:#e6db74>&#39;/showcase/docs/shaders/resources/video0.mp4&#39;</span>]);
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>img</span>.<span style=color:#a6e22e>hide</span>();
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>img</span>.<span style=color:#a6e22e>loop</span>();
</span></span><span style=display:flex><span>    } <span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>img</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>loadImage</span>(<span style=color:#e6db74>&#39;/showcase/docs/shaders/resources/fire_breathing.png&#39;</span>);
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>img</span>.<span style=color:#a6e22e>hide</span>();
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>img</span>.<span style=color:#a6e22e>pause</span>();
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>blendShader</span>.<span style=color:#a6e22e>setUniform</span>(<span style=color:#e6db74>&#39;texture&#39;</span>, <span style=color:#a6e22e>img</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>tintingShader</span>.<span style=color:#a6e22e>setUniform</span>(<span style=color:#e6db74>&#39;texture&#39;</span>, <span style=color:#a6e22e>img</span>);
</span></span><span style=display:flex><span>  })
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>draw</span>() {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>background</span>(<span style=color:#ae81ff>0</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>image</span>(<span style=color:#a6e22e>img</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>700</span>, <span style=color:#ae81ff>500</span>); 
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>mode</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>lmselect</span>.<span style=color:#a6e22e>value</span>()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>mode</span> <span style=color:#f92672>==</span> <span style=color:#ae81ff>5</span>) {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>cpickerA</span>.<span style=color:#a6e22e>show</span>();
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>colorA</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>cpickerA</span>.<span style=color:#a6e22e>color</span>()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>cpickerB</span>.<span style=color:#a6e22e>show</span>();
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>colorB</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>cpickerB</span>.<span style=color:#a6e22e>color</span>()
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>cpickerC</span>.<span style=color:#a6e22e>show</span>();
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>colorC</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>cpickerC</span>.<span style=color:#a6e22e>color</span>()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>cpickerD</span>.<span style=color:#a6e22e>show</span>();
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>colorD</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>cpickerD</span>.<span style=color:#a6e22e>color</span>()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>bmselect</span>.<span style=color:#a6e22e>show</span>();
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>bmode</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>bmselect</span>.<span style=color:#a6e22e>value</span>();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>bslider</span>.<span style=color:#a6e22e>show</span>();
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>brightness</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>bslider</span>.<span style=color:#a6e22e>value</span>();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>shader</span>(<span style=color:#a6e22e>tintingShader</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>beginShape</span>();
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>fill</span>(<span style=color:#a6e22e>colorA</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>vertex</span>(<span style=color:#f92672>-</span><span style=color:#a6e22e>width</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>2</span>, <span style=color:#f92672>-</span><span style=color:#a6e22e>height</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>2</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>fill</span>(<span style=color:#a6e22e>colorB</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>vertex</span>(<span style=color:#a6e22e>width</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>2</span>, <span style=color:#f92672>-</span><span style=color:#a6e22e>height</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>2</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>fill</span>(<span style=color:#a6e22e>colorC</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>vertex</span>(<span style=color:#a6e22e>width</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>2</span>, <span style=color:#a6e22e>height</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>2</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>fill</span>(<span style=color:#a6e22e>colorD</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>vertex</span>(<span style=color:#f92672>-</span><span style=color:#a6e22e>width</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>2</span>, <span style=color:#a6e22e>height</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>2</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>endShape</span>();
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>tintingShader</span>.<span style=color:#a6e22e>setUniform</span>(<span style=color:#e6db74>&#39;brightness&#39;</span>, <span style=color:#a6e22e>brightness</span>); 
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>tintingShader</span>.<span style=color:#a6e22e>setUniform</span>(<span style=color:#e6db74>&#39;mode&#39;</span>, <span style=color:#a6e22e>bmode</span>); 
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>tintingShader</span>.<span style=color:#a6e22e>setUniform</span>(<span style=color:#e6db74>&#39;texture&#39;</span>, <span style=color:#a6e22e>img</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  } 
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>cpickerA</span>.<span style=color:#a6e22e>hide</span>();
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>cpickerB</span>.<span style=color:#a6e22e>hide</span>();
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>cpickerC</span>.<span style=color:#a6e22e>hide</span>();
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>cpickerD</span>.<span style=color:#a6e22e>hide</span>();
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>bmselect</span>.<span style=color:#a6e22e>hide</span>();
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>bslider</span>.<span style=color:#a6e22e>hide</span>();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>shader</span>(<span style=color:#a6e22e>brightnessShader</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>brightnessShader</span>.<span style=color:#a6e22e>setUniform</span>(<span style=color:#e6db74>&#39;texture&#39;</span>, <span style=color:#a6e22e>img</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>brightnessShader</span>.<span style=color:#a6e22e>setUniform</span>(<span style=color:#e6db74>&#39;mode&#39;</span>, <span style=color:#a6e22e>mode</span>);
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>quad</span>(<span style=color:#f92672>-</span><span style=color:#a6e22e>width</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>2</span>, <span style=color:#f92672>-</span><span style=color:#a6e22e>height</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>2</span>, <span style=color:#a6e22e>width</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>2</span>, <span style=color:#f92672>-</span><span style=color:#a6e22e>height</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>2</span>, <span style=color:#a6e22e>width</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>2</span>, <span style=color:#a6e22e>height</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>2</span>, <span style=color:#f92672>-</span><span style=color:#a6e22e>width</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>2</span>, <span style=color:#a6e22e>height</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>2</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>handleFile</span>(<span style=color:#a6e22e>file</span>) {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>file</span>.<span style=color:#a6e22e>type</span> <span style=color:#f92672>===</span> <span style=color:#e6db74>&#39;image&#39;</span>) {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>img</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>createImg</span>(<span style=color:#a6e22e>file</span>.<span style=color:#a6e22e>data</span>, <span style=color:#e6db74>&#39;&#39;</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>img</span>.<span style=color:#a6e22e>hide</span>();
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>file</span>.<span style=color:#a6e22e>type</span> <span style=color:#f92672>===</span> <span style=color:#e6db74>&#39;video&#39;</span>) {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>img</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>createVideo</span>([<span style=color:#a6e22e>file</span>.<span style=color:#a6e22e>data</span>]);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>img</span>.<span style=color:#a6e22e>hide</span>();
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>img</span>.<span style=color:#a6e22e>loop</span>();
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>randomint</span>(<span style=color:#a6e22e>min</span>, <span style=color:#a6e22e>max</span>) {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>min</span> <span style=color:#f92672>=</span> Math.<span style=color:#a6e22e>ceil</span>(<span style=color:#a6e22e>min</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>max</span> <span style=color:#f92672>=</span> Math.<span style=color:#a6e22e>floor</span>(<span style=color:#a6e22e>max</span>);
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> Math.<span style=color:#a6e22e>floor</span>(Math.<span style=color:#a6e22e>random</span>() <span style=color:#f92672>*</span> (<span style=color:#a6e22e>max</span> <span style=color:#f92672>-</span> <span style=color:#a6e22e>min</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span>) <span style=color:#f92672>+</span> <span style=color:#a6e22e>min</span>);
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></div></details><details><summary>Brightness Shader</summary><div class=markdown-inner><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-glsl data-lang=glsl><span style=display:flex><span><span style=color:#66d9ef>precision</span> <span style=color:#66d9ef>mediump</span> <span style=color:#66d9ef>float</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>uniform</span> <span style=color:#66d9ef>int</span> mode;
</span></span><span style=display:flex><span><span style=color:#66d9ef>uniform</span> <span style=color:#66d9ef>sampler2D</span> texture;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>varying</span> <span style=color:#66d9ef>vec2</span> texcoords2;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>float</span> luma(<span style=color:#66d9ef>vec3</span> texel) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#ae81ff>0.299</span> <span style=color:#f92672>*</span> texel.r <span style=color:#f92672>+</span> <span style=color:#ae81ff>0.587</span> <span style=color:#f92672>*</span> texel.g <span style=color:#f92672>+</span> <span style=color:#ae81ff>0.114</span> <span style=color:#f92672>*</span> texel.b;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>float</span> value(<span style=color:#66d9ef>vec3</span> texel) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> max(texel.r, max(texel.g, texel.b));
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>float</span> lightness(<span style=color:#66d9ef>vec3</span> texel) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>float</span> M <span style=color:#f92672>=</span> max(texel.r, max(texel.g, texel.b));
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>float</span> m <span style=color:#f92672>=</span> min(texel.r, min(texel.g, texel.b));
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#ae81ff>0.5</span> <span style=color:#f92672>*</span> (M <span style=color:#f92672>+</span> m);
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>float</span> intensity(<span style=color:#66d9ef>vec3</span> texel) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> (<span style=color:#ae81ff>1.</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>3.</span>) <span style=color:#f92672>*</span> (texel.r <span style=color:#f92672>+</span> texel.g <span style=color:#f92672>+</span> texel.b);
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>void</span> main() {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>vec4</span> texel <span style=color:#f92672>=</span> texture2D(texture, texcoords2);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (mode <span style=color:#f92672>==</span> <span style=color:#ae81ff>1</span>) {
</span></span><span style=display:flex><span>        gl_FragColor <span style=color:#f92672>=</span> <span style=color:#66d9ef>vec4</span>((<span style=color:#66d9ef>vec3</span>(luma(texel.rgb))), <span style=color:#ae81ff>1.0</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span> (mode <span style=color:#f92672>==</span> <span style=color:#ae81ff>2</span>) {
</span></span><span style=display:flex><span>        gl_FragColor <span style=color:#f92672>=</span> <span style=color:#66d9ef>vec4</span>((<span style=color:#66d9ef>vec3</span>(value(texel.rgb))), <span style=color:#ae81ff>1.0</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span> (mode <span style=color:#f92672>==</span> <span style=color:#ae81ff>3</span>) {
</span></span><span style=display:flex><span>        gl_FragColor <span style=color:#f92672>=</span> <span style=color:#66d9ef>vec4</span>((<span style=color:#66d9ef>vec3</span>(lightness(texel.rgb))), <span style=color:#ae81ff>1.0</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span> (mode <span style=color:#f92672>==</span> <span style=color:#ae81ff>4</span>) {
</span></span><span style=display:flex><span>        gl_FragColor <span style=color:#f92672>=</span> <span style=color:#66d9ef>vec4</span>((<span style=color:#66d9ef>vec3</span>(intensity(texel.rgb))), <span style=color:#ae81ff>1.0</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex><span>        gl_FragColor <span style=color:#f92672>=</span> texel;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></div></details><details><summary>Tinting Shader</summary><div class=markdown-inner><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-glsl data-lang=glsl><span style=display:flex><span><span style=color:#66d9ef>precision</span> <span style=color:#66d9ef>mediump</span> <span style=color:#66d9ef>float</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>uniform</span> <span style=color:#66d9ef>sampler2D</span> texture;
</span></span><span style=display:flex><span><span style=color:#66d9ef>uniform</span> <span style=color:#66d9ef>int</span> mode;
</span></span><span style=display:flex><span><span style=color:#66d9ef>uniform</span> <span style=color:#66d9ef>float</span> brightness;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>varying</span> <span style=color:#66d9ef>vec2</span> texcoords2;
</span></span><span style=display:flex><span><span style=color:#66d9ef>varying</span> <span style=color:#66d9ef>vec4</span> color4;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>void</span> main() {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>vec4</span> texel <span style=color:#f92672>=</span> texture2D(texture, texcoords2);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>vec4</span> colorA <span style=color:#f92672>=</span> texel;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>vec4</span> colorB <span style=color:#f92672>=</span> color4;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (mode <span style=color:#f92672>==</span> <span style=color:#ae81ff>0</span>) { <span style=color:#75715e>// multiply</span>
</span></span><span style=display:flex><span>        gl_FragColor <span style=color:#f92672>=</span> colorA <span style=color:#f92672>*</span> colorB <span style=color:#f92672>*</span> brightness;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span> (mode <span style=color:#f92672>==</span> <span style=color:#ae81ff>1</span>) { <span style=color:#75715e>// add (linear dodge)</span>
</span></span><span style=display:flex><span>        gl_FragColor <span style=color:#f92672>=</span> (colorA <span style=color:#f92672>+</span> colorB) <span style=color:#f92672>*</span> brightness;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span> (mode <span style=color:#f92672>==</span> <span style=color:#ae81ff>2</span>) { <span style=color:#75715e>// screen</span>
</span></span><span style=display:flex><span>        gl_FragColor <span style=color:#f92672>=</span> (<span style=color:#ae81ff>1.</span> <span style=color:#f92672>-</span> (<span style=color:#ae81ff>1.</span> <span style=color:#f92672>-</span> colorA) <span style=color:#f92672>*</span> (<span style=color:#ae81ff>1.</span> <span style=color:#f92672>-</span> colorB)) <span style=color:#f92672>*</span> brightness;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span> (mode <span style=color:#f92672>==</span> <span style=color:#ae81ff>3</span>) { <span style=color:#75715e>// overlay</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>float</span> R <span style=color:#f92672>=</span> (colorA[<span style=color:#ae81ff>0</span>] <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>0.5</span>) <span style=color:#f92672>?</span> <span style=color:#ae81ff>2.</span> <span style=color:#f92672>*</span> colorA[<span style=color:#ae81ff>0</span>] <span style=color:#f92672>*</span> colorB[<span style=color:#ae81ff>0</span>] <span style=color:#f92672>:</span> (<span style=color:#ae81ff>1.</span> <span style=color:#f92672>-</span> (<span style=color:#ae81ff>1.</span> <span style=color:#f92672>-</span> colorA[<span style=color:#ae81ff>0</span>]) <span style=color:#f92672>*</span> (<span style=color:#ae81ff>1.</span> <span style=color:#f92672>-</span> colorB[<span style=color:#ae81ff>0</span>]));
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>float</span> G <span style=color:#f92672>=</span> (colorA[<span style=color:#ae81ff>1</span>] <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>0.5</span>) <span style=color:#f92672>?</span> <span style=color:#ae81ff>2.</span> <span style=color:#f92672>*</span> colorA[<span style=color:#ae81ff>1</span>] <span style=color:#f92672>*</span> colorB[<span style=color:#ae81ff>1</span>] <span style=color:#f92672>:</span> (<span style=color:#ae81ff>1.</span> <span style=color:#f92672>-</span> (<span style=color:#ae81ff>1.</span> <span style=color:#f92672>-</span> colorA[<span style=color:#ae81ff>1</span>]) <span style=color:#f92672>*</span> (<span style=color:#ae81ff>1.</span> <span style=color:#f92672>-</span> colorB[<span style=color:#ae81ff>1</span>]));
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>float</span> B <span style=color:#f92672>=</span> (colorA[<span style=color:#ae81ff>2</span>] <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>0.5</span>) <span style=color:#f92672>?</span> <span style=color:#ae81ff>2.</span> <span style=color:#f92672>*</span> colorA[<span style=color:#ae81ff>2</span>] <span style=color:#f92672>*</span> colorB[<span style=color:#ae81ff>2</span>] <span style=color:#f92672>:</span> (<span style=color:#ae81ff>1.</span> <span style=color:#f92672>-</span> (<span style=color:#ae81ff>1.</span> <span style=color:#f92672>-</span> colorA[<span style=color:#ae81ff>2</span>]) <span style=color:#f92672>*</span> (<span style=color:#ae81ff>1.</span> <span style=color:#f92672>-</span> colorB[<span style=color:#ae81ff>2</span>]));
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>float</span> A <span style=color:#f92672>=</span> (colorA[<span style=color:#ae81ff>3</span>] <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>0.5</span>) <span style=color:#f92672>?</span> <span style=color:#ae81ff>2.</span> <span style=color:#f92672>*</span> colorA[<span style=color:#ae81ff>3</span>] <span style=color:#f92672>*</span> colorB[<span style=color:#ae81ff>3</span>] <span style=color:#f92672>:</span> (<span style=color:#ae81ff>1.</span> <span style=color:#f92672>-</span> (<span style=color:#ae81ff>1.</span> <span style=color:#f92672>-</span> colorA[<span style=color:#ae81ff>3</span>]) <span style=color:#f92672>*</span> (<span style=color:#ae81ff>1.</span> <span style=color:#f92672>-</span> colorB[<span style=color:#ae81ff>3</span>]));
</span></span><span style=display:flex><span>        gl_FragColor <span style=color:#f92672>=</span> <span style=color:#66d9ef>vec4</span>(R, G, B, A) <span style=color:#f92672>*</span> brightness;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span> (mode <span style=color:#f92672>==</span> <span style=color:#ae81ff>4</span>) { <span style=color:#75715e>// darkest</span>
</span></span><span style=display:flex><span>        gl_FragColor <span style=color:#f92672>=</span> <span style=color:#66d9ef>vec4</span>(min(colorA[<span style=color:#ae81ff>0</span>], colorB[<span style=color:#ae81ff>0</span>]), 
</span></span><span style=display:flex><span>                            min(colorA[<span style=color:#ae81ff>1</span>], colorB[<span style=color:#ae81ff>1</span>]), 
</span></span><span style=display:flex><span>                            min(colorA[<span style=color:#ae81ff>2</span>], colorB[<span style=color:#ae81ff>2</span>]), 
</span></span><span style=display:flex><span>                            min(colorA[<span style=color:#ae81ff>3</span>], colorB[<span style=color:#ae81ff>3</span>])) <span style=color:#f92672>*</span> brightness;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span> (mode <span style=color:#f92672>==</span> <span style=color:#ae81ff>5</span>) { <span style=color:#75715e>// lightest</span>
</span></span><span style=display:flex><span>        gl_FragColor <span style=color:#f92672>=</span> <span style=color:#66d9ef>vec4</span>(max(colorA[<span style=color:#ae81ff>0</span>], colorB[<span style=color:#ae81ff>0</span>]), 
</span></span><span style=display:flex><span>                            max(colorA[<span style=color:#ae81ff>1</span>], colorB[<span style=color:#ae81ff>1</span>]), 
</span></span><span style=display:flex><span>                            max(colorA[<span style=color:#ae81ff>2</span>], colorB[<span style=color:#ae81ff>2</span>]), 
</span></span><span style=display:flex><span>                            max(colorA[<span style=color:#ae81ff>3</span>], colorB[<span style=color:#ae81ff>3</span>])) <span style=color:#f92672>*</span> brightness;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span> (mode <span style=color:#f92672>==</span> <span style=color:#ae81ff>6</span>) { <span style=color:#75715e>// color burn</span>
</span></span><span style=display:flex><span>        gl_FragColor <span style=color:#f92672>=</span> <span style=color:#ae81ff>1.</span> <span style=color:#f92672>-</span> ((<span style=color:#ae81ff>1.</span> <span style=color:#f92672>-</span> colorA) <span style=color:#f92672>/</span> colorB) <span style=color:#f92672>*</span> brightness;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span> (mode <span style=color:#f92672>==</span> <span style=color:#ae81ff>7</span>) { <span style=color:#75715e>// linear burn</span>
</span></span><span style=display:flex><span>        gl_FragColor <span style=color:#f92672>=</span> (colorA <span style=color:#f92672>+</span> colorB <span style=color:#f92672>-</span> <span style=color:#ae81ff>1.</span>) <span style=color:#f92672>*</span> brightness;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span> (mode <span style=color:#f92672>==</span> <span style=color:#ae81ff>8</span>) { <span style=color:#75715e>// difference</span>
</span></span><span style=display:flex><span>        gl_FragColor <span style=color:#f92672>=</span> (abs(colorA <span style=color:#f92672>-</span> colorB)) <span style=color:#f92672>*</span> brightness;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span> (mode <span style=color:#f92672>==</span> <span style=color:#ae81ff>9</span>) { <span style=color:#75715e>// divide</span>
</span></span><span style=display:flex><span>        gl_FragColor <span style=color:#f92672>=</span> (colorA <span style=color:#f92672>/</span> colorB) <span style=color:#f92672>*</span> brightness;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span> (mode <span style=color:#f92672>==</span> <span style=color:#ae81ff>10</span>) { <span style=color:#75715e>// exclusion</span>
</span></span><span style=display:flex><span>        gl_FragColor <span style=color:#f92672>=</span> (<span style=color:#ae81ff>0.5</span> <span style=color:#f92672>-</span> <span style=color:#ae81ff>2.</span> <span style=color:#f92672>*</span> (colorA <span style=color:#f92672>-</span> <span style=color:#ae81ff>0.5</span>) <span style=color:#f92672>*</span> (colorB <span style=color:#f92672>-</span> <span style=color:#ae81ff>0.5</span>)) <span style=color:#f92672>*</span> brightness;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span> (mode <span style=color:#f92672>==</span> <span style=color:#ae81ff>11</span>) { <span style=color:#75715e>// color dodge</span>
</span></span><span style=display:flex><span>        gl_FragColor <span style=color:#f92672>=</span> (colorA <span style=color:#f92672>/</span> (<span style=color:#ae81ff>1.</span> <span style=color:#f92672>-</span> colorB)) <span style=color:#f92672>*</span> brightness;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span> (mode <span style=color:#f92672>==</span> <span style=color:#ae81ff>12</span>) { <span style=color:#75715e>// hard light</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>float</span> R <span style=color:#f92672>=</span> (colorB[<span style=color:#ae81ff>0</span>] <span style=color:#f92672>&gt;</span> <span style=color:#ae81ff>0.5</span>) <span style=color:#f92672>?</span> (<span style=color:#ae81ff>1.</span> <span style=color:#f92672>-</span> (<span style=color:#ae81ff>1.</span> <span style=color:#f92672>-</span> colorA[<span style=color:#ae81ff>0</span>]) <span style=color:#f92672>*</span> (<span style=color:#ae81ff>1.</span> <span style=color:#f92672>-</span> <span style=color:#ae81ff>2.</span> <span style=color:#f92672>*</span> (colorB[<span style=color:#ae81ff>0</span>] <span style=color:#f92672>-</span> <span style=color:#ae81ff>0.5</span>))) <span style=color:#f92672>:</span> colorA[<span style=color:#ae81ff>0</span>] <span style=color:#f92672>*</span> <span style=color:#ae81ff>2.</span> <span style=color:#f92672>*</span> colorB[<span style=color:#ae81ff>0</span>];
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>float</span> G <span style=color:#f92672>=</span> (colorB[<span style=color:#ae81ff>1</span>] <span style=color:#f92672>&gt;</span> <span style=color:#ae81ff>0.5</span>) <span style=color:#f92672>?</span> (<span style=color:#ae81ff>1.</span> <span style=color:#f92672>-</span> (<span style=color:#ae81ff>1.</span> <span style=color:#f92672>-</span> colorA[<span style=color:#ae81ff>1</span>]) <span style=color:#f92672>*</span> (<span style=color:#ae81ff>1.</span> <span style=color:#f92672>-</span> <span style=color:#ae81ff>2.</span> <span style=color:#f92672>*</span> (colorB[<span style=color:#ae81ff>1</span>] <span style=color:#f92672>-</span> <span style=color:#ae81ff>0.5</span>))) <span style=color:#f92672>:</span> colorA[<span style=color:#ae81ff>1</span>] <span style=color:#f92672>*</span> <span style=color:#ae81ff>2.</span> <span style=color:#f92672>*</span> colorB[<span style=color:#ae81ff>1</span>];
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>float</span> B <span style=color:#f92672>=</span> (colorB[<span style=color:#ae81ff>2</span>] <span style=color:#f92672>&gt;</span> <span style=color:#ae81ff>0.5</span>) <span style=color:#f92672>?</span> (<span style=color:#ae81ff>1.</span> <span style=color:#f92672>-</span> (<span style=color:#ae81ff>1.</span> <span style=color:#f92672>-</span> colorA[<span style=color:#ae81ff>2</span>]) <span style=color:#f92672>*</span> (<span style=color:#ae81ff>1.</span> <span style=color:#f92672>-</span> <span style=color:#ae81ff>2.</span> <span style=color:#f92672>*</span> (colorB[<span style=color:#ae81ff>2</span>] <span style=color:#f92672>-</span> <span style=color:#ae81ff>0.5</span>))) <span style=color:#f92672>:</span> colorA[<span style=color:#ae81ff>2</span>] <span style=color:#f92672>*</span> <span style=color:#ae81ff>2.</span> <span style=color:#f92672>*</span> colorB[<span style=color:#ae81ff>2</span>];
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>float</span> A <span style=color:#f92672>=</span> (colorB[<span style=color:#ae81ff>3</span>] <span style=color:#f92672>&gt;</span> <span style=color:#ae81ff>0.5</span>) <span style=color:#f92672>?</span> (<span style=color:#ae81ff>1.</span> <span style=color:#f92672>-</span> (<span style=color:#ae81ff>1.</span> <span style=color:#f92672>-</span> colorA[<span style=color:#ae81ff>3</span>]) <span style=color:#f92672>*</span> (<span style=color:#ae81ff>1.</span> <span style=color:#f92672>-</span> <span style=color:#ae81ff>2.</span> <span style=color:#f92672>*</span> (colorB[<span style=color:#ae81ff>3</span>] <span style=color:#f92672>-</span> <span style=color:#ae81ff>0.5</span>))) <span style=color:#f92672>:</span> colorA[<span style=color:#ae81ff>3</span>] <span style=color:#f92672>*</span> <span style=color:#ae81ff>2.</span> <span style=color:#f92672>*</span> colorB[<span style=color:#ae81ff>3</span>];
</span></span><span style=display:flex><span>        gl_FragColor <span style=color:#f92672>=</span> <span style=color:#66d9ef>vec4</span>(R, G, B, A) <span style=color:#f92672>*</span> brightness;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span> (mode <span style=color:#f92672>==</span> <span style=color:#ae81ff>13</span>) { <span style=color:#75715e>// vivid light</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>float</span> R <span style=color:#f92672>=</span> (colorB[<span style=color:#ae81ff>0</span>] <span style=color:#f92672>&gt;</span> <span style=color:#ae81ff>0.5</span>) <span style=color:#f92672>?</span> colorA[<span style=color:#ae81ff>0</span>] <span style=color:#f92672>/</span> (<span style=color:#ae81ff>1.</span> <span style=color:#f92672>-</span> <span style=color:#ae81ff>2.</span> <span style=color:#f92672>*</span> (colorB[<span style=color:#ae81ff>0</span>] <span style=color:#f92672>-</span> <span style=color:#ae81ff>0.5</span>)) <span style=color:#f92672>:</span> (<span style=color:#ae81ff>1.</span> <span style=color:#f92672>-</span> (<span style=color:#ae81ff>1.</span> <span style=color:#f92672>-</span> colorA[<span style=color:#ae81ff>0</span>]) <span style=color:#f92672>/</span> (<span style=color:#ae81ff>2.</span> <span style=color:#f92672>*</span> colorB[<span style=color:#ae81ff>0</span>]));
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>float</span> G <span style=color:#f92672>=</span> (colorB[<span style=color:#ae81ff>1</span>] <span style=color:#f92672>&gt;</span> <span style=color:#ae81ff>0.5</span>) <span style=color:#f92672>?</span> colorA[<span style=color:#ae81ff>1</span>] <span style=color:#f92672>/</span> (<span style=color:#ae81ff>1.</span> <span style=color:#f92672>-</span> <span style=color:#ae81ff>2.</span> <span style=color:#f92672>*</span> (colorB[<span style=color:#ae81ff>1</span>] <span style=color:#f92672>-</span> <span style=color:#ae81ff>0.5</span>)) <span style=color:#f92672>:</span> (<span style=color:#ae81ff>1.</span> <span style=color:#f92672>-</span> (<span style=color:#ae81ff>1.</span> <span style=color:#f92672>-</span> colorA[<span style=color:#ae81ff>1</span>]) <span style=color:#f92672>/</span> (<span style=color:#ae81ff>2.</span> <span style=color:#f92672>*</span> colorB[<span style=color:#ae81ff>1</span>]));
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>float</span> B <span style=color:#f92672>=</span> (colorB[<span style=color:#ae81ff>2</span>] <span style=color:#f92672>&gt;</span> <span style=color:#ae81ff>0.5</span>) <span style=color:#f92672>?</span> colorA[<span style=color:#ae81ff>2</span>] <span style=color:#f92672>/</span> (<span style=color:#ae81ff>1.</span> <span style=color:#f92672>-</span> <span style=color:#ae81ff>2.</span> <span style=color:#f92672>*</span> (colorB[<span style=color:#ae81ff>2</span>] <span style=color:#f92672>-</span> <span style=color:#ae81ff>0.5</span>)) <span style=color:#f92672>:</span> (<span style=color:#ae81ff>1.</span> <span style=color:#f92672>-</span> (<span style=color:#ae81ff>1.</span> <span style=color:#f92672>-</span> colorA[<span style=color:#ae81ff>2</span>]) <span style=color:#f92672>/</span> (<span style=color:#ae81ff>2.</span> <span style=color:#f92672>*</span> colorB[<span style=color:#ae81ff>2</span>]));
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>float</span> A <span style=color:#f92672>=</span> (colorB[<span style=color:#ae81ff>3</span>] <span style=color:#f92672>&gt;</span> <span style=color:#ae81ff>0.5</span>) <span style=color:#f92672>?</span> colorA[<span style=color:#ae81ff>3</span>] <span style=color:#f92672>/</span> (<span style=color:#ae81ff>1.</span> <span style=color:#f92672>-</span> <span style=color:#ae81ff>2.</span> <span style=color:#f92672>*</span> (colorB[<span style=color:#ae81ff>3</span>] <span style=color:#f92672>-</span> <span style=color:#ae81ff>0.5</span>)) <span style=color:#f92672>:</span> (<span style=color:#ae81ff>1.</span> <span style=color:#f92672>-</span> (<span style=color:#ae81ff>1.</span> <span style=color:#f92672>-</span> colorA[<span style=color:#ae81ff>3</span>]) <span style=color:#f92672>/</span> (<span style=color:#ae81ff>2.</span> <span style=color:#f92672>*</span> colorB[<span style=color:#ae81ff>3</span>]));
</span></span><span style=display:flex><span>        gl_FragColor <span style=color:#f92672>=</span> <span style=color:#66d9ef>vec4</span>(R, G, B, A) <span style=color:#f92672>*</span> brightness;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span> (mode <span style=color:#f92672>==</span> <span style=color:#ae81ff>14</span>) { <span style=color:#75715e>// vivid light</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>float</span> R <span style=color:#f92672>=</span> (colorB[<span style=color:#ae81ff>0</span>] <span style=color:#f92672>&gt;</span> <span style=color:#ae81ff>0.5</span>) <span style=color:#f92672>?</span> colorA[<span style=color:#ae81ff>0</span>] <span style=color:#f92672>+</span> <span style=color:#ae81ff>2.</span> <span style=color:#f92672>*</span> (colorB[<span style=color:#ae81ff>0</span>] <span style=color:#f92672>-</span> <span style=color:#ae81ff>0.5</span>) <span style=color:#f92672>:</span> (colorA[<span style=color:#ae81ff>0</span>] <span style=color:#f92672>+</span> <span style=color:#ae81ff>2.</span> <span style=color:#f92672>*</span> colorB[<span style=color:#ae81ff>0</span>] <span style=color:#f92672>-</span> <span style=color:#ae81ff>1.</span>);
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>float</span> G <span style=color:#f92672>=</span> (colorB[<span style=color:#ae81ff>1</span>] <span style=color:#f92672>&gt;</span> <span style=color:#ae81ff>0.5</span>) <span style=color:#f92672>?</span> colorA[<span style=color:#ae81ff>1</span>] <span style=color:#f92672>+</span> <span style=color:#ae81ff>2.</span> <span style=color:#f92672>*</span> (colorB[<span style=color:#ae81ff>1</span>] <span style=color:#f92672>-</span> <span style=color:#ae81ff>0.5</span>) <span style=color:#f92672>:</span> (colorA[<span style=color:#ae81ff>1</span>] <span style=color:#f92672>+</span> <span style=color:#ae81ff>2.</span> <span style=color:#f92672>*</span> colorB[<span style=color:#ae81ff>1</span>] <span style=color:#f92672>-</span> <span style=color:#ae81ff>1.</span>);
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>float</span> B <span style=color:#f92672>=</span> (colorB[<span style=color:#ae81ff>2</span>] <span style=color:#f92672>&gt;</span> <span style=color:#ae81ff>0.5</span>) <span style=color:#f92672>?</span> colorA[<span style=color:#ae81ff>2</span>] <span style=color:#f92672>+</span> <span style=color:#ae81ff>2.</span> <span style=color:#f92672>*</span> (colorB[<span style=color:#ae81ff>2</span>] <span style=color:#f92672>-</span> <span style=color:#ae81ff>0.5</span>) <span style=color:#f92672>:</span> (colorA[<span style=color:#ae81ff>2</span>] <span style=color:#f92672>+</span> <span style=color:#ae81ff>2.</span> <span style=color:#f92672>*</span> colorB[<span style=color:#ae81ff>2</span>] <span style=color:#f92672>-</span> <span style=color:#ae81ff>1.</span>);
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>float</span> A <span style=color:#f92672>=</span> (colorB[<span style=color:#ae81ff>3</span>] <span style=color:#f92672>&gt;</span> <span style=color:#ae81ff>0.5</span>) <span style=color:#f92672>?</span> colorA[<span style=color:#ae81ff>3</span>] <span style=color:#f92672>+</span> <span style=color:#ae81ff>2.</span> <span style=color:#f92672>*</span> (colorB[<span style=color:#ae81ff>3</span>] <span style=color:#f92672>-</span> <span style=color:#ae81ff>0.5</span>) <span style=color:#f92672>:</span> (colorA[<span style=color:#ae81ff>3</span>] <span style=color:#f92672>+</span> <span style=color:#ae81ff>2.</span> <span style=color:#f92672>*</span> colorB[<span style=color:#ae81ff>3</span>] <span style=color:#f92672>-</span> <span style=color:#ae81ff>1.</span>);
</span></span><span style=display:flex><span>        gl_FragColor <span style=color:#f92672>=</span> <span style=color:#66d9ef>vec4</span>(R, G, B, A) <span style=color:#f92672>*</span> brightness;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span> (mode <span style=color:#f92672>==</span> <span style=color:#ae81ff>15</span>) { <span style=color:#75715e>// pin light</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>float</span> R <span style=color:#f92672>=</span> (colorB[<span style=color:#ae81ff>0</span>] <span style=color:#f92672>&gt;</span> <span style=color:#ae81ff>0.5</span>) <span style=color:#f92672>?</span> max(colorA[<span style=color:#ae81ff>0</span>], <span style=color:#ae81ff>2.</span> <span style=color:#f92672>*</span> (colorB[<span style=color:#ae81ff>0</span>] <span style=color:#f92672>-</span> <span style=color:#ae81ff>0.5</span>)) <span style=color:#f92672>:</span> min(colorA[<span style=color:#ae81ff>0</span>], <span style=color:#ae81ff>2.</span> <span style=color:#f92672>*</span> colorB[<span style=color:#ae81ff>0</span>]);
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>float</span> G <span style=color:#f92672>=</span> (colorB[<span style=color:#ae81ff>1</span>] <span style=color:#f92672>&gt;</span> <span style=color:#ae81ff>0.5</span>) <span style=color:#f92672>?</span> max(colorA[<span style=color:#ae81ff>1</span>], <span style=color:#ae81ff>2.</span> <span style=color:#f92672>*</span> (colorB[<span style=color:#ae81ff>1</span>] <span style=color:#f92672>-</span> <span style=color:#ae81ff>0.5</span>)) <span style=color:#f92672>:</span> min(colorA[<span style=color:#ae81ff>1</span>], <span style=color:#ae81ff>2.</span> <span style=color:#f92672>*</span> colorB[<span style=color:#ae81ff>1</span>]);
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>float</span> B <span style=color:#f92672>=</span> (colorB[<span style=color:#ae81ff>2</span>] <span style=color:#f92672>&gt;</span> <span style=color:#ae81ff>0.5</span>) <span style=color:#f92672>?</span> max(colorA[<span style=color:#ae81ff>2</span>], <span style=color:#ae81ff>2.</span> <span style=color:#f92672>*</span> (colorB[<span style=color:#ae81ff>2</span>] <span style=color:#f92672>-</span> <span style=color:#ae81ff>0.5</span>)) <span style=color:#f92672>:</span> min(colorA[<span style=color:#ae81ff>2</span>], <span style=color:#ae81ff>2.</span> <span style=color:#f92672>*</span> colorB[<span style=color:#ae81ff>2</span>]);
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>float</span> A <span style=color:#f92672>=</span> (colorB[<span style=color:#ae81ff>3</span>] <span style=color:#f92672>&gt;</span> <span style=color:#ae81ff>0.5</span>) <span style=color:#f92672>?</span> max(colorA[<span style=color:#ae81ff>3</span>], <span style=color:#ae81ff>2.</span> <span style=color:#f92672>*</span> (colorB[<span style=color:#ae81ff>3</span>] <span style=color:#f92672>-</span> <span style=color:#ae81ff>0.5</span>)) <span style=color:#f92672>:</span> min(colorA[<span style=color:#ae81ff>3</span>], <span style=color:#ae81ff>2.</span> <span style=color:#f92672>*</span> colorB[<span style=color:#ae81ff>3</span>]);
</span></span><span style=display:flex><span>        gl_FragColor <span style=color:#f92672>=</span> <span style=color:#66d9ef>vec4</span>(R, G, B, A) <span style=color:#f92672>*</span> brightness;    
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span> (mode <span style=color:#f92672>==</span> <span style=color:#ae81ff>16</span>) { <span style=color:#75715e>// soft light photoshop</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>float</span> R <span style=color:#f92672>=</span> (colorB[<span style=color:#ae81ff>0</span>] <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>0.5</span>) <span style=color:#f92672>?</span> <span style=color:#ae81ff>2.</span> <span style=color:#f92672>*</span> colorA[<span style=color:#ae81ff>0</span>] <span style=color:#f92672>*</span> colorB[<span style=color:#ae81ff>0</span>] <span style=color:#f92672>+</span> colorA[<span style=color:#ae81ff>0</span>] <span style=color:#f92672>*</span> colorA[<span style=color:#ae81ff>0</span>] <span style=color:#f92672>*</span> (<span style=color:#ae81ff>1.</span> <span style=color:#f92672>-</span> <span style=color:#ae81ff>2.</span> <span style=color:#f92672>*</span> colorB[<span style=color:#ae81ff>0</span>]) <span style=color:#f92672>:</span> <span style=color:#ae81ff>2.</span> <span style=color:#f92672>*</span> colorA[<span style=color:#ae81ff>0</span>] <span style=color:#f92672>*</span> (<span style=color:#ae81ff>1.</span> <span style=color:#f92672>-</span> colorB[<span style=color:#ae81ff>0</span>]) <span style=color:#f92672>+</span> sqrt(colorA[<span style=color:#ae81ff>0</span>]) <span style=color:#f92672>*</span> (<span style=color:#ae81ff>2.</span> <span style=color:#f92672>*</span> colorB[<span style=color:#ae81ff>0</span>] <span style=color:#f92672>-</span> <span style=color:#ae81ff>1.</span>);
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>float</span> G <span style=color:#f92672>=</span> (colorB[<span style=color:#ae81ff>1</span>] <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>0.5</span>) <span style=color:#f92672>?</span> <span style=color:#ae81ff>2.</span> <span style=color:#f92672>*</span> colorA[<span style=color:#ae81ff>1</span>] <span style=color:#f92672>*</span> colorB[<span style=color:#ae81ff>1</span>] <span style=color:#f92672>+</span> colorA[<span style=color:#ae81ff>1</span>] <span style=color:#f92672>*</span> colorA[<span style=color:#ae81ff>1</span>] <span style=color:#f92672>*</span> (<span style=color:#ae81ff>1.</span> <span style=color:#f92672>-</span> <span style=color:#ae81ff>2.</span> <span style=color:#f92672>*</span> colorB[<span style=color:#ae81ff>1</span>]) <span style=color:#f92672>:</span> <span style=color:#ae81ff>2.</span> <span style=color:#f92672>*</span> colorA[<span style=color:#ae81ff>1</span>] <span style=color:#f92672>*</span> (<span style=color:#ae81ff>1.</span> <span style=color:#f92672>-</span> colorB[<span style=color:#ae81ff>1</span>]) <span style=color:#f92672>+</span> sqrt(colorA[<span style=color:#ae81ff>1</span>]) <span style=color:#f92672>*</span> (<span style=color:#ae81ff>2.</span> <span style=color:#f92672>*</span> colorB[<span style=color:#ae81ff>1</span>] <span style=color:#f92672>-</span> <span style=color:#ae81ff>1.</span>);
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>float</span> B <span style=color:#f92672>=</span> (colorB[<span style=color:#ae81ff>2</span>] <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>0.5</span>) <span style=color:#f92672>?</span> <span style=color:#ae81ff>2.</span> <span style=color:#f92672>*</span> colorA[<span style=color:#ae81ff>2</span>] <span style=color:#f92672>*</span> colorB[<span style=color:#ae81ff>2</span>] <span style=color:#f92672>+</span> colorA[<span style=color:#ae81ff>2</span>] <span style=color:#f92672>*</span> colorA[<span style=color:#ae81ff>2</span>] <span style=color:#f92672>*</span> (<span style=color:#ae81ff>1.</span> <span style=color:#f92672>-</span> <span style=color:#ae81ff>2.</span> <span style=color:#f92672>*</span> colorB[<span style=color:#ae81ff>2</span>]) <span style=color:#f92672>:</span> <span style=color:#ae81ff>2.</span> <span style=color:#f92672>*</span> colorA[<span style=color:#ae81ff>2</span>] <span style=color:#f92672>*</span> (<span style=color:#ae81ff>1.</span> <span style=color:#f92672>-</span> colorB[<span style=color:#ae81ff>2</span>]) <span style=color:#f92672>+</span> sqrt(colorA[<span style=color:#ae81ff>2</span>]) <span style=color:#f92672>*</span> (<span style=color:#ae81ff>2.</span> <span style=color:#f92672>*</span> colorB[<span style=color:#ae81ff>2</span>] <span style=color:#f92672>-</span> <span style=color:#ae81ff>1.</span>);
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>float</span> A <span style=color:#f92672>=</span> (colorB[<span style=color:#ae81ff>3</span>] <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>0.5</span>) <span style=color:#f92672>?</span> <span style=color:#ae81ff>2.</span> <span style=color:#f92672>*</span> colorA[<span style=color:#ae81ff>3</span>] <span style=color:#f92672>*</span> colorB[<span style=color:#ae81ff>3</span>] <span style=color:#f92672>+</span> colorA[<span style=color:#ae81ff>3</span>] <span style=color:#f92672>*</span> colorA[<span style=color:#ae81ff>3</span>] <span style=color:#f92672>*</span> (<span style=color:#ae81ff>1.</span> <span style=color:#f92672>-</span> <span style=color:#ae81ff>2.</span> <span style=color:#f92672>*</span> colorB[<span style=color:#ae81ff>3</span>]) <span style=color:#f92672>:</span> <span style=color:#ae81ff>2.</span> <span style=color:#f92672>*</span> colorA[<span style=color:#ae81ff>3</span>] <span style=color:#f92672>*</span> (<span style=color:#ae81ff>1.</span> <span style=color:#f92672>-</span> colorB[<span style=color:#ae81ff>3</span>]) <span style=color:#f92672>+</span> sqrt(colorA[<span style=color:#ae81ff>3</span>]) <span style=color:#f92672>*</span> (<span style=color:#ae81ff>2.</span> <span style=color:#f92672>*</span> colorB[<span style=color:#ae81ff>3</span>] <span style=color:#f92672>-</span> <span style=color:#ae81ff>1.</span>);
</span></span><span style=display:flex><span>        gl_FragColor <span style=color:#f92672>=</span> <span style=color:#66d9ef>vec4</span>(R, G, B, A) <span style=color:#f92672>*</span> brightness;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span> (mode <span style=color:#f92672>==</span> <span style=color:#ae81ff>17</span>) { <span style=color:#75715e>// soft light pegtop</span>
</span></span><span style=display:flex><span>        gl_FragColor <span style=color:#f92672>=</span> ((<span style=color:#ae81ff>1.</span> <span style=color:#f92672>-</span> (<span style=color:#ae81ff>2.</span> <span style=color:#f92672>*</span> colorB)) <span style=color:#f92672>*</span> (colorA <span style=color:#f92672>*</span> colorA) <span style=color:#f92672>+</span> (<span style=color:#ae81ff>2.</span> <span style=color:#f92672>*</span> colorB <span style=color:#f92672>*</span> colorA)) <span style=color:#f92672>*</span> brightness;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span> (mode <span style=color:#f92672>==</span> <span style=color:#ae81ff>18</span>) { <span style=color:#75715e>// soft light illusions.hu</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>float</span> R <span style=color:#f92672>=</span> pow(colorA[<span style=color:#ae81ff>0</span>], pow(<span style=color:#ae81ff>2.</span>, <span style=color:#ae81ff>2.</span> <span style=color:#f92672>*</span> (<span style=color:#ae81ff>0.5</span> <span style=color:#f92672>-</span> colorB[<span style=color:#ae81ff>0</span>])));
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>float</span> G <span style=color:#f92672>=</span> pow(colorA[<span style=color:#ae81ff>1</span>], pow(<span style=color:#ae81ff>2.</span>, <span style=color:#ae81ff>2.</span> <span style=color:#f92672>*</span> (<span style=color:#ae81ff>0.5</span> <span style=color:#f92672>-</span> colorB[<span style=color:#ae81ff>1</span>])));
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>float</span> B <span style=color:#f92672>=</span> pow(colorA[<span style=color:#ae81ff>2</span>], pow(<span style=color:#ae81ff>2.</span>, <span style=color:#ae81ff>2.</span> <span style=color:#f92672>*</span> (<span style=color:#ae81ff>0.5</span> <span style=color:#f92672>-</span> colorB[<span style=color:#ae81ff>2</span>])));
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>float</span> A <span style=color:#f92672>=</span> pow(colorA[<span style=color:#ae81ff>3</span>], pow(<span style=color:#ae81ff>2.</span>, <span style=color:#ae81ff>2.</span> <span style=color:#f92672>*</span> (<span style=color:#ae81ff>0.5</span> <span style=color:#f92672>-</span> colorB[<span style=color:#ae81ff>3</span>])));
</span></span><span style=display:flex><span>        gl_FragColor <span style=color:#f92672>=</span> <span style=color:#66d9ef>vec4</span>(R, G, B, A) <span style=color:#f92672>*</span> brightness;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span> (mode <span style=color:#f92672>==</span> <span style=color:#ae81ff>19</span>) { <span style=color:#75715e>// soft-light w3c</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>float</span> gRa <span style=color:#f92672>=</span> (colorA[<span style=color:#ae81ff>0</span>] <span style=color:#f92672>&lt;=</span> <span style=color:#ae81ff>0.25</span>) <span style=color:#f92672>?</span> ((<span style=color:#ae81ff>16.</span> <span style=color:#f92672>*</span> colorA[<span style=color:#ae81ff>0</span>] <span style=color:#f92672>-</span> <span style=color:#ae81ff>12.</span>) <span style=color:#f92672>*</span> colorA[<span style=color:#ae81ff>0</span>] <span style=color:#f92672>+</span> <span style=color:#ae81ff>4.</span>) <span style=color:#f92672>*</span> colorA[<span style=color:#ae81ff>0</span>] <span style=color:#f92672>:</span> sqrt(colorA[<span style=color:#ae81ff>0</span>]); 
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>float</span> gGa <span style=color:#f92672>=</span> (colorA[<span style=color:#ae81ff>1</span>] <span style=color:#f92672>&lt;=</span> <span style=color:#ae81ff>0.25</span>) <span style=color:#f92672>?</span> ((<span style=color:#ae81ff>16.</span> <span style=color:#f92672>*</span> colorA[<span style=color:#ae81ff>1</span>] <span style=color:#f92672>-</span> <span style=color:#ae81ff>12.</span>) <span style=color:#f92672>*</span> colorA[<span style=color:#ae81ff>1</span>] <span style=color:#f92672>+</span> <span style=color:#ae81ff>4.</span>) <span style=color:#f92672>*</span> colorA[<span style=color:#ae81ff>1</span>] <span style=color:#f92672>:</span> sqrt(colorA[<span style=color:#ae81ff>1</span>]); 
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>float</span> gBa <span style=color:#f92672>=</span> (colorA[<span style=color:#ae81ff>2</span>] <span style=color:#f92672>&lt;=</span> <span style=color:#ae81ff>0.25</span>) <span style=color:#f92672>?</span> ((<span style=color:#ae81ff>16.</span> <span style=color:#f92672>*</span> colorA[<span style=color:#ae81ff>2</span>] <span style=color:#f92672>-</span> <span style=color:#ae81ff>12.</span>) <span style=color:#f92672>*</span> colorA[<span style=color:#ae81ff>2</span>] <span style=color:#f92672>+</span> <span style=color:#ae81ff>4.</span>) <span style=color:#f92672>*</span> colorA[<span style=color:#ae81ff>2</span>] <span style=color:#f92672>:</span> sqrt(colorA[<span style=color:#ae81ff>2</span>]); 
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>float</span> gAa <span style=color:#f92672>=</span> (colorA[<span style=color:#ae81ff>3</span>] <span style=color:#f92672>&lt;=</span> <span style=color:#ae81ff>0.25</span>) <span style=color:#f92672>?</span> ((<span style=color:#ae81ff>16.</span> <span style=color:#f92672>*</span> colorA[<span style=color:#ae81ff>3</span>] <span style=color:#f92672>-</span> <span style=color:#ae81ff>12.</span>) <span style=color:#f92672>*</span> colorA[<span style=color:#ae81ff>3</span>] <span style=color:#f92672>+</span> <span style=color:#ae81ff>4.</span>) <span style=color:#f92672>*</span> colorA[<span style=color:#ae81ff>3</span>] <span style=color:#f92672>:</span> sqrt(colorA[<span style=color:#ae81ff>3</span>]);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>float</span> R <span style=color:#f92672>=</span> (colorB[<span style=color:#ae81ff>0</span>] <span style=color:#f92672>&lt;=</span> <span style=color:#ae81ff>0.5</span>) <span style=color:#f92672>?</span> colorA[<span style=color:#ae81ff>0</span>] <span style=color:#f92672>-</span> (<span style=color:#ae81ff>1.</span> <span style=color:#f92672>-</span> <span style=color:#ae81ff>2.</span> <span style=color:#f92672>*</span> colorB[<span style=color:#ae81ff>0</span>]) <span style=color:#f92672>*</span> colorA[<span style=color:#ae81ff>0</span>] <span style=color:#f92672>*</span> (<span style=color:#ae81ff>1.</span> <span style=color:#f92672>-</span> colorA[<span style=color:#ae81ff>0</span>]) <span style=color:#f92672>:</span> colorA[<span style=color:#ae81ff>0</span>] <span style=color:#f92672>+</span> (<span style=color:#ae81ff>2.</span> <span style=color:#f92672>*</span> colorB[<span style=color:#ae81ff>0</span>] <span style=color:#f92672>-</span> <span style=color:#ae81ff>1.</span>) <span style=color:#f92672>*</span> (gRa <span style=color:#f92672>-</span> colorA[<span style=color:#ae81ff>0</span>]);
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>float</span> G <span style=color:#f92672>=</span> (colorB[<span style=color:#ae81ff>1</span>] <span style=color:#f92672>&lt;=</span> <span style=color:#ae81ff>0.5</span>) <span style=color:#f92672>?</span> colorA[<span style=color:#ae81ff>1</span>] <span style=color:#f92672>-</span> (<span style=color:#ae81ff>1.</span> <span style=color:#f92672>-</span> <span style=color:#ae81ff>2.</span> <span style=color:#f92672>*</span> colorB[<span style=color:#ae81ff>1</span>]) <span style=color:#f92672>*</span> colorA[<span style=color:#ae81ff>1</span>] <span style=color:#f92672>*</span> (<span style=color:#ae81ff>1.</span> <span style=color:#f92672>-</span> colorA[<span style=color:#ae81ff>1</span>]) <span style=color:#f92672>:</span> colorA[<span style=color:#ae81ff>1</span>] <span style=color:#f92672>+</span> (<span style=color:#ae81ff>2.</span> <span style=color:#f92672>*</span> colorB[<span style=color:#ae81ff>1</span>] <span style=color:#f92672>-</span> <span style=color:#ae81ff>1.</span>) <span style=color:#f92672>*</span> (gGa <span style=color:#f92672>-</span> colorA[<span style=color:#ae81ff>1</span>]);
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>float</span> B <span style=color:#f92672>=</span> (colorB[<span style=color:#ae81ff>2</span>] <span style=color:#f92672>&lt;=</span> <span style=color:#ae81ff>0.5</span>) <span style=color:#f92672>?</span> colorA[<span style=color:#ae81ff>2</span>] <span style=color:#f92672>-</span> (<span style=color:#ae81ff>1.</span> <span style=color:#f92672>-</span> <span style=color:#ae81ff>2.</span> <span style=color:#f92672>*</span> colorB[<span style=color:#ae81ff>2</span>]) <span style=color:#f92672>*</span> colorA[<span style=color:#ae81ff>2</span>] <span style=color:#f92672>*</span> (<span style=color:#ae81ff>1.</span> <span style=color:#f92672>-</span> colorA[<span style=color:#ae81ff>2</span>]) <span style=color:#f92672>:</span> colorA[<span style=color:#ae81ff>2</span>] <span style=color:#f92672>+</span> (<span style=color:#ae81ff>2.</span> <span style=color:#f92672>*</span> colorB[<span style=color:#ae81ff>2</span>] <span style=color:#f92672>-</span> <span style=color:#ae81ff>1.</span>) <span style=color:#f92672>*</span> (gBa <span style=color:#f92672>-</span> colorA[<span style=color:#ae81ff>2</span>]);
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>float</span> A <span style=color:#f92672>=</span> (colorB[<span style=color:#ae81ff>3</span>] <span style=color:#f92672>&lt;=</span> <span style=color:#ae81ff>0.5</span>) <span style=color:#f92672>?</span> colorA[<span style=color:#ae81ff>3</span>] <span style=color:#f92672>-</span> (<span style=color:#ae81ff>1.</span> <span style=color:#f92672>-</span> <span style=color:#ae81ff>2.</span> <span style=color:#f92672>*</span> colorB[<span style=color:#ae81ff>3</span>]) <span style=color:#f92672>*</span> colorA[<span style=color:#ae81ff>3</span>] <span style=color:#f92672>*</span> (<span style=color:#ae81ff>1.</span> <span style=color:#f92672>-</span> colorA[<span style=color:#ae81ff>3</span>]) <span style=color:#f92672>:</span> colorA[<span style=color:#ae81ff>3</span>] <span style=color:#f92672>+</span> (<span style=color:#ae81ff>2.</span> <span style=color:#f92672>*</span> colorB[<span style=color:#ae81ff>3</span>] <span style=color:#f92672>-</span> <span style=color:#ae81ff>1.</span>) <span style=color:#f92672>*</span> (gAa <span style=color:#f92672>-</span> colorA[<span style=color:#ae81ff>3</span>]);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        gl_FragColor <span style=color:#f92672>=</span> <span style=color:#66d9ef>vec4</span>(R, G, B, A) <span style=color:#f92672>*</span> brightness;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></div></details></article><footer class=book-footer><div class="flex flex-wrap justify-between"><div><a class="flex align-center" href=https://github.com/visualcomputing/showcase/commit/e01839c0508ac36794f57e4cbb5f36624771b5df title='Last modified by rsierraa | June 17, 2023' target=_blank rel=noopener><img src=/showcase/svg/calendar.svg class=book-icon alt=Calendar>
<span>June 17, 2023</span></a></div></div><script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){if(window.getSelection().toString())return;e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script></footer><div class=book-comments></div><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><nav id=TableOfContents><ul><li><ul><li><a href=#exercise>Exercise</a></li><li><a href=#brightness--tinting>Brightness & Tinting</a><ul><li><a href=#controles>Controles</a></li></ul></li></ul></li></ul></nav></div></aside></main></body></html>